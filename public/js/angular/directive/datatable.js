"use strict";!function(angular){angular.module("rop.module.datatable",[]).directive("ropDatatable",["$parse","$timeout",function($parse,$timeout){return{restrict:"AE",scope:{cols:"=cols",sorter:"=sorter",data:"=data",index:"=index",size:"=size",total:"=total",searcher:"=searcher",infinite:"@infinite",multiSelection:"=multiple",noSelection:"=noselection",noRowSelection:"=norowselection"},templateUrl:"/_template/datatable",link:function($scope,element,attrs){$scope.checkAll=function(){$scope.allChecked?($scope.data.forEach(function(r){!r._locked&&(r._checked=!1)}),$scope.allChecked=!1):($scope.data.forEach(function(r){!r._locked&&(r._checked=!0)}),$scope.allChecked=!0)},$scope.sort=function(col){col.sort="1"==col.sort?"0":"1",$scope.cols.forEach(function(r,i){r!==col&&(r.sort=r.sort?"1":void 0)});for(var prop in col)$scope.sorter[prop]=col[prop];$scope.index=1,$scope.size=new Number($scope.size)},$scope.verifyCheckAll=function(){var result=!0;if($scope.data)if(0==$scope.data.length)result=!1;else for(var i=0;i<$scope.data.length;i++){var r=$scope.data[i];!r._locked&&!r._checked&&(result=!1),r._locked&&(result=!1)}result?$scope.allChecked=!0:$scope.allChecked=!1},$scope.$watch("data",function(){$scope.verifyCheckAll()})}}}])}(window.angular);