"use strict";!function(angular){var model=angular.module("rop.module.pagination",[]);model.directive("ropPagination",["$parse",function($parse){return{restrict:"A",scope:{index:"=index",size:"=size",total:"=total",searcher:"=searcher",infinite:"=infinite",infiniteEnd:"=infiniteEnd"},controller:function($scope){},controllerAs:"ctrl",templateUrl:"/_template/pagination",link:function($scope,element,attrs){$scope.ctrl.myIndex=1,$scope.ceilingIndex=$scope.index+4,$scope.$watch("total",function(){if($scope.total){var total="string"==typeof $scope.total?new Number($scope.total):$scope.total;$scope.pages=[];for(var i=0;i<Math.ceil(total/$scope.size);i++)$scope.pages.push({index:i+1});$scope.index=1,$scope.ctrl.myIndex=1,$scope.ceilingIndex=$scope.index+4}}),$scope.$watch("size",function(){if($scope.size){$scope.pages=[];for(var i=0;i<Math.ceil($scope.total/$scope.size);i++)$scope.pages.push({index:i+1});$scope.index=1,$scope.ctrl.myIndex=1,$scope.ceilingIndex=$scope.index+4,$scope.searcher($scope.index,$scope.size)}}),$scope.toFirst=function(){$scope.index=1,$scope.ceilingIndex=5,$scope.searcher($scope.index,$scope.size)},$scope.toLast=function(){$scope.index=$scope.pages.length,$scope.ceilingIndex=$scope.pages.length,$scope.searcher($scope.index,$scope.size)},$scope.searchPrevious=function(){$scope.ceilingIndex==$scope.index+4&&$scope.index>1&&$scope.ceilingIndex--,$scope.index>1&&(--$scope.index,$scope.searcher($scope.index,$scope.size))},$scope.searchNext=function(){$scope.ceilingIndex==$scope.index&&$scope.index<$scope.pages.length&&$scope.ceilingIndex++,($scope.infinite||$scope.index<$scope.pages.length)&&(++$scope.index,$scope.searcher($scope.index,$scope.size))},$scope.searchIndex=function(i){$scope.index="string"==typeof i?new Number(i):i,$scope.searcher($scope.index,$scope.size)},$scope.toPage=function(){var myIndex="string"==typeof $scope.ctrl.myIndex?new Number($scope.ctrl.myIndex):$scope.ctrl.myIndex;myIndex>$scope.pages.length||($scope.ceilingIndex=Math.max(Math.min(myIndex+4,$scope.pages.length),5),$scope.searchIndex(myIndex))},$scope.infinite&&($scope.infiniteStart=function(){return 1==$scope.index})}}}])}(window.angular);