!function(factory){return"function"==typeof define&&define.amd?define(["jquery"],function($){return factory($,window,document)}):"object"==typeof exports?module.exports=factory(require("jquery"),window,document):factory(jQuery,window,document)}(function($,window,document){"use strict";var BROWSER_IS_IE7,BROWSER_SCROLLBAR_WIDTH,DOMSCROLL,DOWN,DRAG,ENTER,KEYDOWN,KEYUP,MOUSEDOWN,MOUSEENTER,MOUSEMOVE,MOUSEUP,MOUSEWHEEL,NanoScroll,PANEDOWN,RESIZE,SCROLL,SCROLLBAR,TOUCHMOVE,UP,WHEEL,cAF,defaults,getBrowserScrollbarWidth,hasTransform,isFFWithBuggyScrollbar,rAF,transform,_elementStyle,_prefixStyle,_vendor;defaults={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},SCROLLBAR="scrollbar",SCROLL="scroll",MOUSEDOWN="mousedown",MOUSEENTER="mouseenter",MOUSEMOVE="mousemove",MOUSEWHEEL="mousewheel",MOUSEUP="mouseup",RESIZE="resize",DRAG="drag",ENTER="enter",UP="up",PANEDOWN="panedown",DOMSCROLL="DOMMouseScroll",DOWN="down",WHEEL="wheel",KEYDOWN="keydown",KEYUP="keyup",TOUCHMOVE="touchmove",BROWSER_IS_IE7="Microsoft Internet Explorer"===window.navigator.appName&&/msie 7./i.test(window.navigator.appVersion)&&window.ActiveXObject,BROWSER_SCROLLBAR_WIDTH=null,rAF=window.requestAnimationFrame,cAF=window.cancelAnimationFrame,_elementStyle=document.createElement("div").style,_vendor=function(){var i,transform,vendor,vendors,_i,_len;for(vendors=["t","webkitT","MozT","msT","OT"],i=_i=0,_len=vendors.length;_i<_len;i=++_i)if(vendor=vendors[i],transform=vendors[i]+"ransform",transform in _elementStyle)return vendors[i].substr(0,vendors[i].length-1);return!1}(),_prefixStyle=function(style){return _vendor!==!1&&(""===_vendor?style:_vendor+style.charAt(0).toUpperCase()+style.substr(1))},transform=_prefixStyle("transform"),hasTransform=transform!==!1,getBrowserScrollbarWidth=function(){var outer,outerStyle,scrollbarWidth;return outer=document.createElement("div"),outerStyle=outer.style,outerStyle.position="absolute",outerStyle.width="100px",outerStyle.height="100px",outerStyle.overflow=SCROLL,outerStyle.top="-9999px",document.body.appendChild(outer),scrollbarWidth=outer.offsetWidth-outer.clientWidth,document.body.removeChild(outer),scrollbarWidth},isFFWithBuggyScrollbar=function(){var isOSXFF,ua,version;return ua=window.navigator.userAgent,!!(isOSXFF=/(?=.+Mac OS X)(?=.+Firefox)/.test(ua))&&(version=/Firefox\/\d{2}\./.exec(ua),version&&(version=version[0].replace(/\D+/g,"")),isOSXFF&&+version>23)},NanoScroll=function(){function NanoScroll(el,options){this.el=el,this.options=options,BROWSER_SCROLLBAR_WIDTH||(BROWSER_SCROLLBAR_WIDTH=getBrowserScrollbarWidth()),this.$el=$(this.el),this.doc=$(this.options.documentContext||document),this.win=$(this.options.windowContext||window),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return NanoScroll.prototype.preventScrolling=function(e,direction){if(this.isActive)if(e.type===DOMSCROLL)(direction===DOWN&&e.originalEvent.detail>0||direction===UP&&e.originalEvent.detail<0)&&e.preventDefault();else if(e.type===MOUSEWHEEL){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;(direction===DOWN&&e.originalEvent.wheelDelta<0||direction===UP&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},NanoScroll.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},NanoScroll.prototype.updateScrollValues=function(){var content,direction;content=this.content,this.maxScrollTop=content.scrollHeight-content.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=content.scrollTop,direction=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==direction&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:direction}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},NanoScroll.prototype.setOnScrollStyles=function(){var cssValue;hasTransform?(cssValue={},cssValue[transform]="translate(0, "+this.sliderTop+"px)"):cssValue={top:this.sliderTop},rAF?(cAF&&this.scrollRAF&&cAF(this.scrollRAF),this.scrollRAF=rAF(function(_this){return function(){return _this.scrollRAF=null,_this.slider.css(cssValue)}}(this))):this.slider.css(cssValue)},NanoScroll.prototype.createEvents=function(){this.events={down:function(_this){return function(e){return _this.isBeingDragged=!0,_this.offsetY=e.pageY-_this.slider.offset().top,_this.slider.is(e.target)||(_this.offsetY=0),_this.pane.addClass("active"),_this.doc.bind(MOUSEMOVE,_this.events[DRAG]).bind(MOUSEUP,_this.events[UP]),_this.body.bind(MOUSEENTER,_this.events[ENTER]),!1}}(this),drag:function(_this){return function(e){return _this.sliderY=e.pageY-_this.$el.offset().top-_this.paneTop-(_this.offsetY||.5*_this.sliderHeight),_this.scroll(),_this.contentScrollTop>=_this.maxScrollTop&&_this.prevScrollTop!==_this.maxScrollTop?_this.$el.trigger("scrollend"):0===_this.contentScrollTop&&0!==_this.prevScrollTop&&_this.$el.trigger("scrolltop"),!1}}(this),up:function(_this){return function(e){return _this.isBeingDragged=!1,_this.pane.removeClass("active"),_this.doc.unbind(MOUSEMOVE,_this.events[DRAG]).unbind(MOUSEUP,_this.events[UP]),_this.body.unbind(MOUSEENTER,_this.events[ENTER]),!1}}(this),resize:function(_this){return function(e){_this.reset()}}(this),panedown:function(_this){return function(e){return _this.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*_this.sliderHeight,_this.scroll(),_this.events.down(e),!1}}(this),scroll:function(_this){return function(e){_this.updateScrollValues(),_this.isBeingDragged||(_this.iOSNativeScrolling||(_this.sliderY=_this.sliderTop,_this.setOnScrollStyles()),null!=e&&(_this.contentScrollTop>=_this.maxScrollTop?(_this.options.preventPageScrolling&&_this.preventScrolling(e,DOWN),_this.prevScrollTop!==_this.maxScrollTop&&_this.$el.trigger("scrollend")):0===_this.contentScrollTop&&(_this.options.preventPageScrolling&&_this.preventScrolling(e,UP),0!==_this.prevScrollTop&&_this.$el.trigger("scrolltop"))))}}(this),wheel:function(_this){return function(e){var delta;if(null!=e)return delta=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,delta&&(_this.sliderY+=-delta/3),_this.scroll(),!1}}(this),enter:function(_this){return function(e){var _ref;if(_this.isBeingDragged)return 1!==(e.buttons||e.which)?(_ref=_this.events)[UP].apply(_ref,arguments):void 0}}(this)}},NanoScroll.prototype.addEvents=function(){var events;this.removeEvents(),events=this.events,this.options.disableResize||this.win.bind(RESIZE,events[RESIZE]),this.iOSNativeScrolling||(this.slider.bind(MOUSEDOWN,events[DOWN]),this.pane.bind(MOUSEDOWN,events[PANEDOWN]).bind(""+MOUSEWHEEL+" "+DOMSCROLL,events[WHEEL])),this.$content.bind(""+SCROLL+" "+MOUSEWHEEL+" "+DOMSCROLL+" "+TOUCHMOVE,events[SCROLL])},NanoScroll.prototype.removeEvents=function(){var events;events=this.events,this.win.unbind(RESIZE,events[RESIZE]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+SCROLL+" "+MOUSEWHEEL+" "+DOMSCROLL+" "+TOUCHMOVE,events[SCROLL])},NanoScroll.prototype.generate=function(){var contentClass,cssRule,currentPadding,options,pane,paneClass,sliderClass;return options=this.options,paneClass=options.paneClass,sliderClass=options.sliderClass,contentClass=options.contentClass,(pane=this.$el.children("."+paneClass)).length||pane.children("."+sliderClass).length||this.$el.append('<div class="'+paneClass+'"><div class="'+sliderClass+'" /></div>'),this.pane=this.$el.children("."+paneClass),this.slider=this.pane.find("."+sliderClass),0===BROWSER_SCROLLBAR_WIDTH&&isFFWithBuggyScrollbar()?(currentPadding=window.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),cssRule={right:-14,paddingRight:+currentPadding+14}):BROWSER_SCROLLBAR_WIDTH&&(cssRule={right:-BROWSER_SCROLLBAR_WIDTH},this.$el.addClass("has-scrollbar")),null!=cssRule&&this.$content.css(cssRule),this},NanoScroll.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},NanoScroll.prototype.reset=function(){var content,contentHeight,contentPosition,contentStyle,contentStyleOverflowY,paneBottom,paneHeight,paneOuterHeight,paneTop,parentMaxHeight,right,sliderHeight;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),content=this.content,contentStyle=content.style,contentStyleOverflowY=contentStyle.overflowY,BROWSER_IS_IE7&&this.$content.css({height:this.$content.height()}),contentHeight=content.scrollHeight+BROWSER_SCROLLBAR_WIDTH,parentMaxHeight=parseInt(this.$el.css("max-height"),10),parentMaxHeight>0&&(this.$el.height(""),this.$el.height(content.scrollHeight>parentMaxHeight?parentMaxHeight:content.scrollHeight)),paneHeight=this.pane.outerHeight(!1),paneTop=parseInt(this.pane.css("top"),10),paneBottom=parseInt(this.pane.css("bottom"),10),paneOuterHeight=paneHeight+paneTop+paneBottom,sliderHeight=Math.round(paneOuterHeight/contentHeight*paneHeight),sliderHeight<this.options.sliderMinHeight?sliderHeight=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&sliderHeight>this.options.sliderMaxHeight&&(sliderHeight=this.options.sliderMaxHeight),contentStyleOverflowY===SCROLL&&contentStyle.overflowX!==SCROLL&&(sliderHeight+=BROWSER_SCROLLBAR_WIDTH),this.maxSliderTop=paneOuterHeight-sliderHeight,this.contentHeight=contentHeight,this.paneHeight=paneHeight,this.paneOuterHeight=paneOuterHeight,this.sliderHeight=sliderHeight,this.paneTop=paneTop,this.slider.height(sliderHeight),this.events.scroll(),this.pane.show(),this.isActive=!0,content.scrollHeight===content.clientHeight||this.pane.outerHeight(!0)>=content.scrollHeight&&contentStyleOverflowY!==SCROLL?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===content.scrollHeight&&contentStyleOverflowY===SCROLL?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),contentPosition=this.$content.css("position"),"static"!==contentPosition&&"relative"!==contentPosition||(right=parseInt(this.$content.css("right"),10),right&&this.$content.css({right:"",marginRight:right})),this)},NanoScroll.prototype.scroll=function(){if(this.isActive)return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this},NanoScroll.prototype.scrollBottom=function(offsetY){if(this.isActive)return this.$content.scrollTop(this.contentHeight-this.$content.height()-offsetY).trigger(MOUSEWHEEL),this.stop().restore(),this},NanoScroll.prototype.scrollTop=function(offsetY){if(this.isActive)return this.$content.scrollTop(+offsetY).trigger(MOUSEWHEEL),this.stop().restore(),this},NanoScroll.prototype.scrollTo=function(node){if(this.isActive)return this.scrollTop(this.$el.find(node).get(0).offsetTop),this},NanoScroll.prototype.stop=function(){return cAF&&this.scrollRAF&&(cAF(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},NanoScroll.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),BROWSER_IS_IE7&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},NanoScroll.prototype.flash=function(){if(!this.iOSNativeScrolling&&this.isActive)return this.reset(),this.pane.addClass("flashed"),setTimeout(function(_this){return function(){_this.pane.removeClass("flashed")}}(this),this.options.flashDelay),this},NanoScroll}(),$.fn.nanoScroller=function(settings){return this.each(function(){var options,scrollbar;if((scrollbar=this.nanoscroller)||(options=$.extend({},defaults,settings),this.nanoscroller=scrollbar=new NanoScroll(this,options)),settings&&"object"==typeof settings){if($.extend(scrollbar.options,settings),null!=settings.scrollBottom)return scrollbar.scrollBottom(settings.scrollBottom);if(null!=settings.scrollTop)return scrollbar.scrollTop(settings.scrollTop);if(settings.scrollTo)return scrollbar.scrollTo(settings.scrollTo);if("bottom"===settings.scroll)return scrollbar.scrollBottom(0);if("top"===settings.scroll)return scrollbar.scrollTop(0);if(settings.scroll&&settings.scroll instanceof $)return scrollbar.scrollTo(settings.scroll);if(settings.stop)return scrollbar.stop();if(settings.destroy)return scrollbar.destroy();if(settings.flash)return scrollbar.flash()}return scrollbar.reset()})},$.fn.nanoScroller.Constructor=NanoScroll});
"use strict";function getCookie(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");return(arr=document.cookie.match(reg))?unescape(arr[2]):null}function formatXml(xml){var formatted="",reg=/(>)(<)(\/*)/g;xml=xml.replace(/>\s*</g,"><").replace(reg,"$1\r\n$2$3");var pad=0;return $.each(xml.split("\r\n"),function(index,node){var indent=0;node.match(/.+<\/\w[^>]*>$/)?indent=0:node.match(/^<\/\w/)?0!=pad&&(pad-=1):indent=node.match(/^<\w[^>]*[^\/]>.*$/)?1:0;for(var padding="",i=0;i<pad;i++)padding+="  ";formatted+=padding+node+"\r\n",pad+=indent}),formatted}function PlayJsQQPopWin(qq,site,hasMenu){setTimeout(function(){window.location.href="tencent://message/?uin="+qq+"&Site="+site+"&Menu="+hasMenu})}var _hmt=_hmt||[];!function(){var hm=document.createElement("script");hm.src="//hm.baidu.com/hm.js?ed13a730df72b0d9d0307dff4d8fdaeb";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)}(),window.bassdk={quick:function(){},track:function(){},userIdentify:function(){}},function($){function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.event.special.destroyed={remove:function(o){o.handler&&o.handler()}},$.support.transition=transitionEnd();var addWithTransition=function($father,$child,direction,cb){"none"==$father.css("display")&&$father.show(0),$father.css({height:"auto",transition:"0.6s"});var childOption={transition:"0.6s",position:"relative",opacity:0},scope=this;childOption[direction]="20px",$child.css(childOption),$father.data("oldHeight",$father.height()),$father.append($child),$father.data("newHeight",$father.height()),$father.height($father.data("oldHeight")).height($father.data("newHeight")).one($.support.transition.end,function(){$father.css({height:"",transition:""})}),childOption.opacity=1,childOption[direction]=0,$child.css(childOption).one($.support.transition.end,function(){var childOption={transition:"",position:"",opacity:""};childOption[direction]="",$(this).css(childOption),cb&&cb.call(scope)})},detachWithTransition=function($father,$child,direction,cb){"none"==$father.css("display")&&$father.show(0),$father.css({height:"auto",transition:"0.6s"});var childOption={transition:"0.6s",position:"relative",opacity:1},scope=this;childOption[direction]="0",$child.css(childOption),$father.data("oldHeight",$father.height()),$child.hide(0),$father.data("newHeight",$father.height()),$child.show(0),childOption.opacity=0,childOption[direction]="20px",$child.css(childOption).one($.support.transition.end,function(){$child.detach(),cb&&cb.call(scope)}),$father.height($father.data("oldHeight")).height($father.data("newHeight")).one($.support.transition.end,function(){$father.css({height:"",transition:""})})};$.fn.appendWithTransition=function(dom,direction,cb){var $father=this,$test=$(dom),$child=$test?$test:dom;return addWithTransition($father,$child,direction?direction:"left",cb),this},$.fn.appendToWithTransition=function(dom,direction,cb){var $child=this,$test=$(dom),$father=$test?$test:dom;return addWithTransition($father,$child,direction?direction:"left",cb),this},$.fn.detachWithTransition=function(direction,cb){var $father=this.parent();return detachWithTransition($father,this,direction?direction:"left",cb),this};var originalAddEventListener=window.addEventListener,originalRemoveEventListener=window.removeEventListener;window.addEventListener=function(){!window.listenerStack&&(window.listenerStack={}),window.listenerStack[arguments[0]]=arguments[1],originalAddEventListener.apply(this,arguments)},window.removeEventListener=function(){!window.listenerStack&&(window.listenerStack={}),delete window.listenerStack[arguments[0]],originalRemoveEventListener.apply(this,arguments)},$.fn.consistentTransition=function(){var _this=this,rect=$.data(window,this.attr("rcp-id"));if(rect&&rect.hasOwnProperty("top")&&rect.el[0]!==this[0]){var newRect=window.getScreenRect(this,$("body")),transform="translate3d("+(rect.left-newRect.left)+"px, "+(rect.top-newRect.top)+"px, 0)";this.hide(0),this.css({"-webkit-transform":transform,transform:transform,width:newRect.width+"px",height:newRect.height+"px",transition:0}),this.show(0),this.css({"-webkit-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)",width:rect.width+"px",height:rect.height+"px",transition:"all 300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}).one($.support.transition.end,function(){_this.css({"-webkit-transform":"",transform:"",width:"",height:"",transition:""}),$.data(window,_this.attr("rcp-id"),$.extend({el:_this},window.getScreenRect(_this,$("body"))))})}else this.css({"-webkit-transform":"",transform:"",width:"",height:"",transition:""}),$.data(window,this.attr("rcp-id"),$.extend({el:this},window.getScreenRect(this,$("body"))))}}($),Date.prototype.Format=function(fmt){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(""+this.getFullYear()).substr(4-RegExp.$1.length)));for(var k in o)new RegExp("("+k+")").test(fmt)&&(fmt=fmt.replace(RegExp.$1,1==RegExp.$1.length?o[k]:("00"+o[k]).substr((""+o[k]).length)));return fmt},window.getBrowserType=function(){var is_chrome=navigator.userAgent.indexOf("Chrome")>-1,is_explorer=navigator.userAgent.indexOf("MSIE")>-1,is_firefox=navigator.userAgent.indexOf("Firefox")>-1,is_safari=navigator.userAgent.indexOf("Safari")>-1,is_opera=navigator.userAgent.toLowerCase().indexOf("op")>-1;return is_chrome&&is_safari&&(is_safari=!1),is_chrome&&is_opera&&(is_chrome=!1),is_explorer?"MSIE":is_firefox?"Firefox":is_opera?"op":is_safari?"Safari":is_chrome?"Chrome":null},window.getScreenRect=function(element,screen){var elementRect=element[0].getBoundingClientRect(),screenRect=screen[0].getBoundingClientRect();return{top:elementRect.top-screenRect.top,left:elementRect.left-screenRect.left,width:elementRect.width,height:elementRect.height}},window.clearSelection=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},window.ROPStyleConstant={loadingTime:0},String.prototype.plural=function(revert){var plural={"(quiz)$":"$1zes","^(ox)$":"$1en","([m|l])ouse$":"$1ice","(matr|vert|ind)ix|ex$":"$1ices","(x|ch|ss|sh)$":"$1es","([^aeiouy]|qu)y$":"$1ies","(hive)$":"$1s","(?:([^f])fe|([lr])f)$":"$1$2ves","(shea|lea|loa|thie)f$":"$1ves",sis$:"ses","([ti])um$":"$1a","(tomat|potat|ech|her|vet)o$":"$1oes","(bu)s$":"$1ses","(alias)$":"$1es","(octop)us$":"$1i","(ax|test)is$":"$1es","(us)$":"$1es","([^s]+)$":"$1s"},singular={"(quiz)zes$":"$1","(matr)ices$":"$1ix","(vert|ind)ices$":"$1ex","^(ox)en$":"$1","(alias)es$":"$1","(octop|vir)i$":"$1us","(cris|ax|test)es$":"$1is","(shoe)s$":"$1","(o)es$":"$1","(bus)es$":"$1","([m|l])ice$":"$1ouse","(x|ch|ss|sh)es$":"$1","(m)ovies$":"$1ovie","(s)eries$":"$1eries","([^aeiouy]|qu)ies$":"$1y","([lr])ves$":"$1f","(tive)s$":"$1","(hive)s$":"$1","(li|wi|kni)ves$":"$1fe","(shea|loa|lea|thie)ves$":"$1f","(^analy)ses$":"$1sis","((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$":"$1$2sis","([ti])a$":"$1um","(n)ews$":"$1ews","(h|bl)ouses$":"$1ouse","(corpse)s$":"$1","(us)es$":"$1",s$:""},irregular={move:"moves",foot:"feet",goose:"geese",sex:"sexes",child:"children",man:"men",tooth:"teeth",person:"people"},uncountable=["sheep","fish","deer","moose","series","species","money","rice","information","equipment"];if(uncountable.indexOf(this.toLowerCase())>=0)return this;for(var word in irregular){if(revert)var pattern=new RegExp(irregular[word]+"$","i"),replace=word;else var pattern=new RegExp(word+"$","i"),replace=irregular[word];if(pattern.test(this))return this.replace(pattern,replace)}if(revert)var array=singular;else var array=plural;for(var reg in array){var pattern=new RegExp(reg,"i");if(pattern.test(this))return this.replace(pattern,array[reg])}return this};
"use strict";window._lastHttpRequest=new Date;var consoleApp=angular.module("ConsoleApp",["ui.router","ngAnimate","ngCookies","ngMaterial","ngMessages"]);consoleApp.config(function($mdThemingProvider){var customBlueMap=$mdThemingProvider.extendPalette("cyan",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"ffffff",300:"00C8AB",500:"00C5A3",800:"00A589",A100:"EEFCFF"});$mdThemingProvider.definePalette("customBlue",customBlueMap),$mdThemingProvider.theme("default").primaryPalette("customBlue",{"default":"500","hue-1":"50","hue-2":"800","hue-3":"A100"}).accentPalette("pink");var greyMap=$mdThemingProvider.extendPalette("grey",{contrastDefaultColor:"dark",contrastDarkColors:["50"],contrastLightColors:["300","500","800","A100"],50:"FFFFFF",300:"35383B",500:"2b2b2b",800:"212121",A100:"000000"});$mdThemingProvider.definePalette("amazingPaletteName",greyMap),$mdThemingProvider.theme("dracular").primaryPalette("amazingPaletteName",{"default":"500","hue-1":"50","hue-2":"300","hue-3":"800"})}),consoleApp.config(function($mdIconProvider){$mdIconProvider.iconSet("action","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-action.svg",24).iconSet("alert","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-alert.svg",24).iconSet("av","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-av.svg",24).iconSet("communication","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-communication.svg",24).iconSet("content","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-content.svg",24).iconSet("device","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-device.svg",24).iconSet("editor","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-editor.svg",24).iconSet("file","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-file.svg",24).iconSet("hardware","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-hardware.svg",24).iconSet("image","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-image.svg",24).iconSet("maps","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-maps.svg",24).iconSet("navigation","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-navigation.svg",24).iconSet("notification","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-notification.svg",24).iconSet("social","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-social.svg",24).iconSet("toggle","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-toggle.svg",24).defaultIconSet("/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-action.svg",24)}),consoleApp.factory("HttpObserver",function(){var sessionInjector={response:function(config){return window._lastHttpRequest=new Date,config}};return sessionInjector}),consoleApp.config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function($stateProvider,$urlRouterProvider,$locationProvider,$httpProvider){$stateProvider.state("index",{templateUrl:"/_view/console/index",controller:"IndexCtrl",url:"/console/home"}),$urlRouterProvider.otherwise("/console/home"),$locationProvider.html5Mode(!0),$locationProvider.hashPrefix("!"),$httpProvider.interceptors.push("HttpObserver")}]),consoleApp.controller("ConsoleCtrl",["$rootScope","$scope","$state","$location","$window","$http","$cookies","$mdDialog",function($rootScope,$scope,$state,$location,$window,$http,$cookies,$mdDialog){$rootScope.removeLoading=function(){$(".loading").hasClass("out")||($(".loading").addClass("start"),setTimeout(function(){$(".loading").addClass("out").one($.support.transition.end,function(){$(this).hide(),$("body").addClass("reveal")})},ROPStyleConstant.loadingTime))},$rootScope._entry="0",window.addEventListener("message",function(e){"expired"==e.data&&$rootScope.locate("sso?from=console")}),$rootScope.switchFrame=function(subentry,url,title){$rootScope._subentry=subentry,$rootScope._title=title,$("#mainFrameWrapper").animate({scrollTop:0}),$("#mainFrameWrapper")[0].innerHTML='<iframe id="mainFrame" src=/frame/'+url+' scrolling="no" width="100%" style="min-height:800px;" noresize="noresize" marginwidth="0" marginheight="0" frameborder="0" class=""></iframe>',$http.post("/agent",{module:"common",partial:"common",api:"tips"})},$rootScope.toggleEntry=function(index){$rootScope._entry!=index?$rootScope._entry=index:$rootScope._entry=-1,setTimeout(function(){$(".nano").nanoScroller()},500)},$rootScope.locate=function(url){$window.location.href=url},$rootScope.toPlatform=function(path){$scope.locate(Constant.protocol+"://"+Constant.host+":"+Constant.port+(path?path:""))},$rootScope.toWelcome=function(){$scope.locate(Constant.protocol+"://"+Constant.host+":"+Constant.port)},$scope.logout=function(){$http.post("/agent",{module:"sso",partial:"session",api:"quit"}).then(function(body){("boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success)&&($cookies.put("_session",null,{path:"/",domain:"."+Constant.host}),$cookies.remove("_session"),$rootScope.profile=void 0,$window.location.href="sso?from=console")},function(why){console.log(why)})},$rootScope.go=function(tab){$state.go(tab)},$rootScope.isAdmin=function(){!(!$rootScope.profile||"0"!=$rootScope.profile.login_user_type&&"3"!=$rootScope.profile.login_user_type)},$rootScope.isSsv=function(){!(!$rootScope.profile||"2"!=$rootScope.profile.login_user_type)},$rootScope.alert=function(msg){$mdDialog.show($mdDialog.alert().clickOutsideToClose(!0).title("出错了").textContent(msg).ariaLabel(msg).ok("了解"))},$rootScope.getSystemHints=function(){var source=new EventSource("/sse/common/tips");source.onmessage=function(e){if(window._lastHttpRequest&&window._lastHttpRequest.getTime()+Constant.exipration<(new Date).getTime())return void $rootScope.locate("sso?from=console");var body=JSON.parse(e.data);return body._closeSSE?(source.close(),void console.log("2")):body._skipSSE?void console.log("3"):("boolean"==typeof body.is_success&&body.is_success||"string"==typeof body.is_success&&"true"==body.is_success?($rootScope.systemHints=body.data_list,console.log("1")):(console.log(body.msg),source.close()),void $rootScope.$apply())},window.test=function(){console.log($cookies.get("connect.sid"))},window.addEventListener("beforeunload",function(event){source.close()})},$scope.init=function(id){var _session=$cookies.get("_session")?JSON.parse($cookies.get("_session")):"";_session&&id==_session.id?$rootScope.profile=_session:($rootScope.profile=void 0,$cookies.remove("_session"),$rootScope.locate("sso?from=console")),$rootScope.removeLoading(),$rootScope.getSystemHints(),setTimeout(function(){$(".nano").nanoScroller()},800),$state.go("index")}}]),consoleApp.controller("IndexCtrl",["$rootScope","$scope","$http","$mdSidenav","$compile","$element",function($rootScope,$scope,$http,$mdSidenav,$compile,$element){$rootScope.tab="index",$scope.toggleSidenav=function(){$mdSidenav("right").toggle()},$scope.fetchSysMsg=function(){$http.post("/agent",{module:"console",partial:"consoles",api:"secret-reset"}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?$scope.systemHints=body.data.appsecret:console.log(body.data.msg)},function(why){$rootScope.alert(why)})},$scope.hasHint=function(){return $scope.systemHints&&$scope.systemHints.length},$scope.pageindex=1,$scope.items=[],$scope.unappApiCheckedList=[],$scope.appApiCheckedList=[],$scope.appApiList=[],$scope.unappApiList=[],$scope.secretReset=function(){$http.post("/agent",{module:"console",partial:"consoles",api:"secret-reset",param:{app_id:$scope.appDetails.app_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?$scope.appDetails.appsecret=body.data.appsecret:console.log(body.msg)},function(why){console.log(why)})},$scope.testSecretReset=function(){$http.post("/agent",{module:"console",partial:"consoles",api:"test-secret-reset",param:{app_id:$scope.appDetails.app_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?$scope.appDetails.test_appsecret=body.data.test_appsecret:console.log(body.msg)},function(why){console.log(why)})},$scope.tokenReset=function(){$http.post("/agent",{module:"console",partial:"consoles",api:"token-reset",param:{app_id:$scope.appDetails.app_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?$scope.appDetails.access_token=body.data.access_token:console.log(body.msg)},function(why){console.log(why)})},$scope.testTokenReset=function(){$http.post("/agent",{module:"console",partial:"consoles",api:"test-token-reset",param:{app_id:$scope.appDetails.app_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?$scope.appDetails.test_access_token=body.data.test_access_token:console.log(body.msg)},function(why){console.log(why)})},$scope.viewApp=function(app){$http.post("/agent",{module:"console",partial:"consoles",api:"details",param:{app_id:app.app_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?($scope.appDetails=body.data,!$scope.appDetails.app_id&&($scope.appDetails.app_id=app.app_id),$.extend(app,$scope.appDetails),$("#app_info").modal()):console.log(body.msg)},function(why){console.log(why)})},$scope.viewEdit=function(app){$http.post("/agent",{module:"console",partial:"consoles",api:"details",param:{app_id:app.app_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?($scope.appDetails=body.data,!$scope.appDetails.app_id&&($scope.appDetails.app_id=app.app_id),$.extend(app,$scope.appDetails),$("#app_update").modal()):console.log(body.msg)},function(why){console.log(why)})},$scope.viewApi=function(app){$scope.appSelected=app,$scope.apiSearcher($scope.apiPageIndex,$scope.apiPageSize,function(){$("#api_list").modal()})},$scope.viewUnApi=function(e){var $btn=$(e.currentTarget).button("loading");$scope.unapiSearcher($scope.unapiPageIndex,$scope.unapiPageSize,function(){$("#unapi_list").modal(),$btn.button("reset")})},$scope.viewCreate=function(){$scope.appDetails={},$("#app_create").modal()},$scope.load=function(){},$scope.editApp=function(){$http.post("/agent",{module:"console",partial:"consoles",api:"edit",param:{app_id:$scope.appDetails.app_id,app_name:$scope.appDetails.app_name,remark:$scope.appDetails.remark,user_type:$scope.profile.login_user_type}}).then(function(body){if("boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success){var app=[].concat.apply([],$scope.items.map(function(item,i){return item.app_id==body.data.app_id?[item]:[]}));app&&$.extend(app,body.data)}else console.log(body.msg);$("#app_update").modal("hide")},function(why){console.log(why)})},$scope.$on("$viewContentLoaded",function(event){$scope.load(),setTimeout(function(){$(".md-sidenav-left .md-expand:first-child md-list md-list-item:first-child button").click()})}),$scope.apiPageIndex=1,$scope.apiPageSize=5,$scope.apiRefresh=function(cb){$scope.apiPageIndex=1,$scope.apiPageSize=5,$scope.apiSearcher(null,null,cb)},$scope.apiSearcher=function(index,size,cb){$scope.appSelected&&$http.post("/agent",{module:"console",partial:"consoles",api:"api",param:$.extend({app_id:$scope.appSelected.app_id,pageindex:index?index:$scope.apiPageIndex,pagesize:size?size:$scope.apiPageSize},$scope.apiSearchParam)}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?($scope.appApiList=body.data.app_api_list,$scope.apiTotal=Number.parseInt(body.data.list_count),$scope.appApiCheckedList.splice(0,$scope.appApiCheckedList.length),cb&&cb.call()):console.log(body.msg)},function(why){console.log(why),cb&&cb.call()})},$scope.toggleAllApi=function(){$scope.appApiCheckedList.length&&$scope.appApiCheckedList.length==$scope.appApiList.length?$scope.appApiCheckedList.splice(0,$scope.appApiCheckedList.length):$scope.appApiList.forEach(function(api){$scope.appApiCheckedList.indexOf(api)==-1&&$scope.appApiCheckedList.push(api)})},$scope.toggleApi=function(api){$scope.appApiCheckedList.indexOf(api)==-1?$scope.appApiCheckedList.push(api):$scope.appApiCheckedList.splice($scope.appApiCheckedList.indexOf(api),1)},$scope.deleteApi=function(){$http.post("/agent",{module:"console",partial:"consoles",api:"delete-api",param:{app_id:$scope.appSelected.app_id,api_id:$scope.appApiCheckedList.map(function(item){return item.api_id}).join("@")}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?$scope.apiRefresh():console.log(body.msg)},function(why){console.log(why)})},$scope.allApiChecked=function(){return 0==[].concat.apply([],$scope.appApiList.map(function(item){return $scope.appApiCheckedList.indexOf(item)==-1?[item]:[]})).length},$scope.unapiPageIndex=1,$scope.unapiPageSize=5,$scope.unapiRefresh=function(cb){$scope.unapiPageIndex=1,$scope.unapiPageSize=5,$scope.unapiSearcher(null,null,cb)},$scope.unapiSearcher=function(index,size,cb){$scope.appSelected&&$http.post("/agent",{module:"console",partial:"consoles",api:"unapi",param:$.extend({app_id:$scope.appSelected.app_id,pageindex:index?index:$scope.unapiPageIndex,pagesize:size?size:$scope.unapiPageSize},$scope.apiSearchParam)}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?($scope.unappApiList=body.data.app_api_list,$scope.unapiTotal=Number.parseInt(body.data.list_count),$scope.unappApiCheckedList.splice(0,$scope.unappApiCheckedList.length),cb&&cb.call()):console.log(body.msg)},function(why){console.log(why),cb&&cb.call()})},$scope.toggleAllUnApi=function(){$scope.unappApiCheckedList.length&&$scope.unappApiCheckedList.length==$scope.unappApiList.length?$scope.unappApiCheckedList.splice(0,$scope.unappApiCheckedList.length):$scope.unappApiList.forEach(function(api){$scope.unappApiCheckedList.indexOf(api)==-1&&$scope.unappApiCheckedList.push(api)})},$scope.toggleUnApi=function(api){$scope.unappApiCheckedList.indexOf(api)==-1?$scope.unappApiCheckedList.push(api):$scope.unappApiCheckedList.splice($scope.unappApiCheckedList.indexOf(api),1)},$scope.addUnApi=function(){$http.post("/agent",{module:"console",partial:"consoles",api:"add-api",param:{app_id:$scope.appSelected.app_id,api_id:$scope.unappApiCheckedList.map(function(item){return item.api_id}).join("@")}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?$scope.apiRefresh(function(){$("#unapi_list").modal("hide")}):console.log(body.msg)},function(why){console.log(why)})},$scope.allUnApiChecked=function(){return 0==[].concat.apply([],$scope.unappApiList.map(function(item){return $scope.unappApiCheckedList.indexOf(item)==-1?[item]:[]})).length},$scope.$on("$viewContentLoaded",function(event){})}]),consoleApp.filter("escapeHtml",function(){var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return function(str){return String(str).replace(/[&<>"'\/]/g,function(s){return entityMap[s]})}}),consoleApp.filter("unescapeHtml",function(){var entityMap={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/"};return function(str,type){if(str){var rawStr=String(str).replace(/(&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;)/g,function(s){return entityMap[s]});if(str&&"undefined"!=str){if("json"==type)return JSON.stringify(JSON.parse(rawStr),null,2);if("xml"==type)return formatXml(rawStr)}return rawStr}}}),consoleApp.filter("trusthtml",["$sce",function($sce){return function(t){return $sce.trustAsHtml(t)}}]),consoleApp.directive("ropPagination",["$parse",function($parse){return{restrict:"A",scope:{index:"=index",size:"=size",total:"=total",searcher:"=searcher"},templateUrl:"/_template/pagination",link:function($scope,element,attrs){$scope.myIndex=$scope.index,$scope.ceilingIndex=$scope.index+4,$scope.$watch("total",function(){$scope.pages=[];for(var i=0;i<Math.ceil($scope.total/$scope.size);i++)$scope.pages.push({index:i+1})}),$scope.$watch("size",function(){$scope.pages=[];for(var i=0;i<Math.ceil($scope.total/$scope.size);i++)$scope.pages.push({index:i+1});$scope.index=1,$scope.ceilingIndex=5,$scope.searcher($scope.index,$scope.size)}),$scope.toFirst=function(){$scope.index=1,$scope.ceilingIndex=5,$scope.searcher($scope.index,$scope.size)},$scope.toLast=function(){$scope.index=$scope.pages.length,$scope.ceilingIndex=$scope.pages.length,$scope.searcher($scope.index,$scope.size)},$scope.searchPrevious=function(){$scope.ceilingIndex==$scope.index+4&&$scope.index>1&&$scope.ceilingIndex--,$scope.index>1&&(--$scope.index,$scope.searcher($scope.index,$scope.size))},$scope.searchNext=function(){$scope.ceilingIndex==$scope.index&&$scope.index<$scope.pages.length&&$scope.ceilingIndex++,$scope.index<$scope.pages.length&&(++$scope.index,$scope.searcher($scope.index,$scope.size))},$scope.searchIndex=function(i){$scope.index=i,$scope.searcher($scope.index,$scope.size)},$scope.toPage=function(myIndex){$scope.ceilingIndex=Math.min(Number.parseInt(myIndex)+4,$scope.pages.length),$scope.searchIndex(myIndex)}}}}]),consoleApp.directive("ropTreeView",["$compile",function($compile){return{restrict:"AE",scope:{data:"=data",field:"=field",option:"=option"},replace:!0,templateUrl:"/js/angular/template/tree_view.html",link:function($scope,element,attrs){try{$scope.data=JSON.parse(attrs.data)}catch(e){$scope.data=$scope.$parent[attrs.data]}var recur=function recur(item,runner){item[$scope.field.children]&&item[$scope.field.children].length&&item[$scope.field.children].forEach(function(subItem){runner(subItem,item),recur(subItem,runner)})},recur_counter=function recur_counter(item,checked){var allUnchecked=!0;item[$scope.field.children]&&item[$scope.field.children].forEach(function(brother){checked?!brother[$scope.field.checked]&&(allUnchecked=!1):brother[$scope.field.checked]&&(allUnchecked=!1)}),allUnchecked&&(item[$scope.field.checked]=checked,item._parent&&recur_counter(item._parent,checked))},watcher=function(){!$scope.option&&($scope.option={}),$scope.field&&(!$scope.field.id&&($scope.field.id="_id"),!$scope.field.label&&($scope.field.id="_label"),!$scope.field.children&&($scope.field.children="_children"),!$scope.field.checked&&($scope.field.checked="_checked"),!$scope.field.collapsed&&($scope.field.collapsed="_collapsed")),$scope.data&&$scope.data.forEach(function(item){item[$scope.field.children]&&item[$scope.field.children].length&&($scope.option.collapseAll?item[$scope.field.collapsed]=!0:item[$scope.field.collapsed]=!1),recur(item,function(node,parent){node._parent=parent,node[$scope.field.children]&&node[$scope.field.children].length&&($scope.option.collapseAll?node[$scope.field.collapsed]=!0:node[$scope.field.collapsed]=!1)})})};$scope.$watch("data",function(){watcher()}),window.test=$scope.$parent,$scope.$parent.RopTreeView={},$scope.$parent.RopTreeView.getChecked=function(){var list=[];return $scope.data&&$scope.data.forEach(function(item){item[$scope.field.checked]&&list.push(item),recur(item,function(node){node[$scope.field.checked]&&list.push(node)})}),list},$scope.toggleChecked=function(item){item[$scope.field.checked]=!item[$scope.field.checked],recur(item,function(node){node[$scope.field.checked]=item[$scope.field.checked]}),item[$scope.field.checked]?item._parent&&(item._parent[$scope.field.checked]=item[$scope.field.checked],item._parent._parent&&(item._parent._parent[$scope.field.checked]=item[$scope.field.checked])):item._parent&&recur_counter(item._parent,!1)},$scope.toggleCollapse=function(item){item[$scope.field.collapsed]=!item[$scope.field.collapsed]}}}}]);