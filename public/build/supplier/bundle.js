!function($){$.extend($.fn,{swapClass:function(c1,c2){var c1Elements=this.filter("."+c1);return this.filter("."+c2).removeClass(c2).addClass(c1),c1Elements.removeClass(c1).addClass(c2),this},replaceClass:function(c1,c2){return this.filter("."+c1).removeClass(c1).addClass(c2).end()},hoverClass:function(className){return className=className||"hover",this.hover(function(){$(this).addClass(className)},function(){$(this).removeClass(className)})},heightToggle:function(animated,callback){animated?this.animate({height:"toggle"},animated,callback):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"](),callback&&callback.apply(this,arguments)})},heightHide:function(animated,callback){animated?this.animate({height:"hide"},animated,callback):(this.hide(),callback&&this.each(callback))},prepareBranches:function(settings){return settings.prerendered||(this.filter(":last-child:not(ul)").addClass(CLASSES.last),this.filter((settings.collapsed?"":"."+CLASSES.closed)+":not(."+CLASSES.open+")").find(">ul").hide()),this.filter(":has(>ul)")},applyClasses:function(settings,toggler){if(this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(event){this==event.target&&toggler.apply($(this).next())}).add($("a",this)).hoverClass(),!settings.prerendered){this.filter(":has(>ul:hidden)").addClass(CLASSES.expandable).replaceClass(CLASSES.last,CLASSES.lastExpandable),this.not(":has(>ul:hidden)").addClass(CLASSES.collapsable).replaceClass(CLASSES.last,CLASSES.lastCollapsable);var hitarea=this.find("div."+CLASSES.hitarea);hitarea.length||(hitarea=this.prepend('<div class="'+CLASSES.hitarea+'"/>').find("div."+CLASSES.hitarea)),hitarea.removeClass().addClass(CLASSES.hitarea).each(function(){var classes="";$.each($(this).parent().attr("class").split(" "),function(){classes+=this+"-hitarea "}),$(this).addClass(classes)})}this.find("div."+CLASSES.hitarea).click(toggler)},treeview:function(settings){function treeController(tree,control){function handler(filter){return function(){return toggler.apply($("div."+CLASSES.hitarea,tree).filter(function(){return!filter||$(this).parent("."+filter).length})),!1}}$("a:eq(0)",control).click(handler(CLASSES.collapsable)),$("a:eq(1)",control).click(handler(CLASSES.expandable)),$("a:eq(2)",control).click(handler())}function toggler(){$(this).parent().find(">.hitarea").swapClass(CLASSES.collapsableHitarea,CLASSES.expandableHitarea).swapClass(CLASSES.lastCollapsableHitarea,CLASSES.lastExpandableHitarea).end().swapClass(CLASSES.collapsable,CLASSES.expandable).swapClass(CLASSES.lastCollapsable,CLASSES.lastExpandable).find(">ul").heightToggle(settings.animated,settings.toggle),settings.unique&&$(this).parent().siblings().find(">.hitarea").replaceClass(CLASSES.collapsableHitarea,CLASSES.expandableHitarea).replaceClass(CLASSES.lastCollapsableHitarea,CLASSES.lastExpandableHitarea).end().replaceClass(CLASSES.collapsable,CLASSES.expandable).replaceClass(CLASSES.lastCollapsable,CLASSES.lastExpandable).find(">ul").heightHide(settings.animated,settings.toggle)}function serialize(){var data=[];branches.each(function(i,e){data[i]=$(e).is(":has(>ul:visible)")?1:0}),$.cookie(settings.cookieId,data.join(""),settings.cookieOptions)}function deserialize(){var stored=$.cookie(settings.cookieId);if(stored){var data=stored.split("");branches.each(function(i,e){$(e).find(">ul")[parseInt(data[i])?"show":"hide"]()})}}if(settings=$.extend({cookieId:"treeview"},settings),settings.toggle){var callback=settings.toggle;settings.toggle=function(){return callback.apply($(this).parent()[0],arguments)}}this.data("toggler",toggler),this.addClass("treeview");var branches=this.find("li").prepareBranches(settings);switch(settings.persist){case"cookie":var toggleCallback=settings.toggle;settings.toggle=function(){serialize(),toggleCallback&&toggleCallback.apply(this,arguments)},deserialize();break;case"location":var current=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(current.length){var items=current.addClass("selected").parents("ul, li").add(current.next()).show();settings.prerendered&&items.filter("li").swapClass(CLASSES.collapsable,CLASSES.expandable).swapClass(CLASSES.lastCollapsable,CLASSES.lastExpandable).find(">.hitarea").swapClass(CLASSES.collapsableHitarea,CLASSES.expandableHitarea).swapClass(CLASSES.lastCollapsableHitarea,CLASSES.lastExpandableHitarea)}}return branches.applyClasses(settings,toggler),settings.control&&(treeController(this,settings.control),$(settings.control).show()),this}}),$.treeview={};var CLASSES=$.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"}}(jQuery);
function del_html_tags(str,reallyDo,replaceWith){var e=new RegExp(reallyDo,"g");return words=str.replace(e,replaceWith),words}function packageTree(data){data.indexOf("body")&&(data=del_html_tags(data,"body","body1"));var xml,startIndex,html='<code class="plain">&lt;?xml version="1.0" ?&gt;</code>';/msie/.test(navigator.userAgent.toLowerCase())?(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async=!1,xml.loadXML(data),xml=$(xml).children(),startIndex=0):(xml=data,startIndex=1);var xmlObj=$(xml);html+='<ul id="tree">';for(var i=startIndex;i<xmlObj.length;i++){var $xmlroot=$(xmlObj[i]),xmlroot=xmlObj[i];if(1==xmlroot.nodeType){html=html+'<li><code class="plain">&lt;</code><code class="keyword">'+xmlroot.nodeName.toLowerCase()+"</code>";var atr=xmlroot.attributes;if("undefined"!=typeof atr)for(var k=0;k<atr.length;k++)html=html+' <code class="color1">'+atr[k].nodeName+'</code>="<code class="string">'+atr[k].nodeValue+'</code>"';html+='<code class="plain">&gt;</code>',$xmlroot.children().length>0?html+=packageChildren($xmlroot.children()):html=html+'<code class="plainplain">'+$xmlroot.text()+"</code>",html=html+'<code class="plain">&lt;/</code><code class="keyword">'+xmlroot.nodeName.toLowerCase()+'</code><code class="plain">&gt;</code></li>'}}html+="</ul>",html.indexOf("body1")&&(html=del_html_tags(html,"body1","body")),$("#CanvasXml").html(html),$("#tree").treeview()}function packageTreeError(data){data.indexOf("body")&&(data=del_html_tags(data,"body","body1"));var xml,startIndex,html='<code class="plain">&lt;?xml version="1.0" ?&gt;</code>';/msie/.test(navigator.userAgent.toLowerCase())?(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async=!1,xml.loadXML(data),xml=$(xml).children(),startIndex=0):(xml=data,startIndex=1);var xmlObj=$(xml);html+='<ul id="treeError">';for(var i=startIndex;i<xmlObj.length;i++){var $xmlroot=$(xmlObj[i]),xmlroot=xmlObj[i];if(1==xmlroot.nodeType){html=html+'<li><code class="plain">&lt;</code><code class="keyword">'+xmlroot.nodeName.toLowerCase()+"</code>";var atr=xmlroot.attributes;if("undefined"!=typeof atr)for(var k=0;k<atr.length;k++)html=html+' <code class="color1">'+atr[k].nodeName+'</code>="<code class="string">'+atr[k].nodeValue+'</code>"';html+='<code class="plain">&gt;</code>',$xmlroot.children().length>0?html+=packageChildren($xmlroot.children()):html=html+'<code class="plainplain">'+$xmlroot.text()+"</code>",html=html+'<code class="plain">&lt;/</code><code class="keyword">'+xmlroot.nodeName.toLowerCase()+'</code><code class="plain">&gt;</code></li>'}}html+="</ul>",html.indexOf("body1")&&(html=del_html_tags(html,"body1","body")),$("#CanvasXmlError").html(html),$("#treeError").treeview()}function packageChildren(children){var html="";html+="<ul>";for(var i=0;i<children.length;i++){var $node=$(children[i]),node=children[i];html=html+'<li><code class="plain">&lt;</code><code class="keyword">'+node.nodeName.toLowerCase()+"</code>";var atr=children[i].attributes;if("undefined"!=typeof atr)for(var k=0;k<atr.length;k++)html=html+' <code class="color1">'+atr[k].nodeName+'</code>="<code class="string">'+atr[k].nodeValue+'</code>"';html+='<code class="plain">&gt;</code>',$node.children().length>0?html+=packageChildren($node.children()):html=html+'<code class="plainplain">'+$node.text()+"</code>",html=html+'<code class="plain">&lt;/</code><code class="keyword">'+node.nodeName.toLowerCase()+'</code><code class="plain">&gt;</code></li>'}return html+="</ul>"}
function $id(id){return document.getElementById(id)}function IsArray(obj){return obj&&"object"==typeof obj&&"number"==typeof obj.length&&!obj.propertyIsEnumerable("length")}function Process(json){SetTab(),window.IsCollapsible=!0;var html="";try{if(""==json)return void(json='""');var obj=eval("["+json+"]");html=ProcessObject(obj[0],0,!1,!1,!1),$id("Canvas").innerHTML="<PRE class='CodeContainer' style='background-color: transparent;border-color: transparent;'>"+html+"</PRE>"}catch(e){console.log("JSON Parsing Error in Process():\n"+e.message),$id("Canvas").innerHTML=""}}function ProcessError(json){SetTab(),window.IsCollapsible=!0;var html="";try{if(""==json)return void(json='""');var obj=eval("["+json+"]");html=ProcessObject(obj[0],0,!1,!1,!1),$id("CanvasError").innerHTML="<PRE class='CodeContainer' style='background-color: transparent;border-color: transparent;'>"+html+"</PRE>"}catch(e){console.log("JSON Parsing Error in ProcessError():\n"+e.message),$id("CanvasError").innerHTML=""}}function ProcessObject(obj,indent,addComma,isArray,isPropertyContent){var html="",comma=addComma?"<span class='Comma'>,</span> ":"",type=typeof obj,clpsHtml="";if(IsArray(obj))if(0==obj.length)html+=GetRow(indent,"<span class='ArrayBrace'>[ ]</span>"+comma,isPropertyContent);else{clpsHtml=window.IsCollapsible?'<span><img src="'+window.ImgExpanded+'" onClick="ExpImgClicked(this)" /></span><span class=\'collapsible\'>':"",html+=GetRow(indent,"<span class='ArrayBrace'>[</span>"+clpsHtml,isPropertyContent);for(var i=0;i<obj.length;i++)html+=ProcessObject(obj[i],indent+1,i<obj.length-1,!0,!1);clpsHtml=window.IsCollapsible?"</span>":"",html+=GetRow(indent,clpsHtml+"<span class='ArrayBrace'>]</span>"+comma)}else if("object"==type)if(null==obj)html+=FormatLiteral("null","",comma,indent,isArray,"Null");else if(obj.constructor==window._dateObj.constructor)html+=FormatLiteral("new Date("+obj.getTime()+") /*"+obj.toLocaleString()+"*/","",comma,indent,isArray,"Date");else if(obj.constructor==window._regexpObj.constructor)html+=FormatLiteral("new RegExp("+obj+")","",comma,indent,isArray,"RegExp");else{var numProps=0;for(var prop in obj)numProps++;if(0==numProps)html+=GetRow(indent,"<span class='ObjectBrace'>{ }</span>"+comma,isPropertyContent);else{clpsHtml=window.IsCollapsible?'<span><img src="'+window.ImgExpanded+'" onClick="ExpImgClicked(this)" /></span><span class=\'collapsible\'>':"",html+=GetRow(indent,"<span class='ObjectBrace'>{</span>"+clpsHtml,isPropertyContent);var j=0;for(var prop in obj){var quote=window.QuoteKeys?'"':"";html+=GetRow(indent+1,"<span class='PropertyName'>"+quote+prop+quote+"</span>: "+ProcessObject(obj[prop],indent+1,++j<numProps,!1,!0))}clpsHtml=window.IsCollapsible?"</span>":"",html+=GetRow(indent,clpsHtml+"<span class='ObjectBrace'>}</span>"+comma)}}else"number"==type?html+=FormatLiteral(obj,"",comma,indent,isArray,"Number"):"boolean"==type?html+=FormatLiteral(obj,"",comma,indent,isArray,"Boolean"):"function"==type?obj.constructor==window._regexpObj.constructor?html+=FormatLiteral("new RegExp("+obj+")","",comma,indent,isArray,"RegExp"):(obj=FormatFunction(indent,obj),html+=FormatLiteral(obj,"",comma,indent,isArray,"Function")):html+="undefined"==type?FormatLiteral("undefined","",comma,indent,isArray,"Null"):FormatLiteral(obj.toString().split("\\").join("\\\\").split('"').join('\\"'),'"',comma,indent,isArray,"String");return html}function FormatLiteral(literal,quote,comma,indent,isArray,style){"string"==typeof literal&&(literal=literal.split("<").join("&lt;").split(">").join("&gt;"));var str="<span class='"+style+"'>"+quote+literal+quote+comma+"</span>";return isArray&&(str=GetRow(indent,str)),str}function FormatFunction(indent,obj){for(var tabs="",i=0;i<indent;i++)tabs+=window.TAB;for(var funcStrArray=obj.toString().split("\n"),str="",i=0;i<funcStrArray.length;i++)str+=(0==i?"":tabs)+funcStrArray[i]+"\n";return str}function GetRow(indent,data,isPropertyContent){for(var tabs="",i=0;i<indent&&!isPropertyContent;i++)tabs+=window.TAB;return null!=data&&data.length>0&&"\n"!=data.charAt(data.length-1)&&(data+="\n"),tabs+data}function CollapsibleViewClicked(){$id("CollapsibleViewDetail").style.visibility=$id("CollapsibleView").checked?"visible":"hidden",Process()}function QuoteKeysClicked(){window.QuoteKeys=$id("QuoteKeys").checked,Process()}function CollapseAllClicked(){EnsureIsPopulated(),TraverseChildren($id("Canvas"),function(element){"collapsible"==element.className&&MakeContentVisible(element,!1)},0)}function ExpandAllClicked(){EnsureIsPopulated(),TraverseChildren($id("Canvas"),function(element){"collapsible"==element.className&&MakeContentVisible(element,!0)},0)}function MakeContentVisible(element,visible){var img=element.previousSibling.firstChild;img.tagName&&"img"==img.tagName.toLowerCase()&&(element.style.display=visible?"inline":"none",element.previousSibling.firstChild.src=visible?window.ImgExpanded:window.ImgCollapsed)}function TraverseChildren(element,func,depth){for(var i=0;i<element.childNodes.length;i++)TraverseChildren(element.childNodes[i],func,depth+1);func(element,depth)}function ExpImgClicked(img){var container=img.parentNode.nextSibling;if(container){var disp="none",src=window.ImgCollapsed;"none"==container.style.display&&(disp="inline",src=window.ImgExpanded),container.style.display=disp,img.src=src}}function CollapseLevel(level){EnsureIsPopulated(),TraverseChildren($id("Canvas"),function(element,depth){"collapsible"==element.className&&(depth>=level?MakeContentVisible(element,!1):MakeContentVisible(element,!0))},0)}function TabSizeChanged(){Process()}function SetTab(){window.TAB=MultiplyString(2,window.SINGLE_TAB)}function EnsureIsPopulated(){!$id("Canvas").innerHTML&&$id("RawJson").value&&Process()}function MultiplyString(num,str){for(var sb=[],i=0;i<num;i++)sb.push(str);return sb.join("")}function SelectAllClicked(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var sel=window.getSelection();sel.removeAllRanges&&window.getSelection().removeAllRanges()}var range=document.body&&document.body.createTextRange?document.body.createTextRange():document.createRange();range.selectNode?range.selectNode($id("Canvas")):range.moveToElementText&&range.moveToElementText($id("Canvas")),range.select?range.select($id("Canvas")):window.getSelection().addRange(range)}function LinkToJson(){var val=$id("RawJson").value;val=escape(val.split("/n").join(" ").split("/r").join(" ")),$id("InvisibleLinkUrl").value=val,$id("InvisibleLink").submit()}window.SINGLE_TAB="  ",window.ImgCollapsed="/js/plugin/collapse/css/images/Collapsed.gif",window.ImgExpanded="/js/plugin/collapse/css/images/Expanded.gif",window.QuoteKeys=!0,window._dateObj=new Date,window._regexpObj=new RegExp;
"use strict";function getCookie(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");return(arr=document.cookie.match(reg))?unescape(arr[2]):null}function formatXml(xml){var formatted="",reg=/(>)(<)(\/*)/g;xml=xml.replace(/>\s*</g,"><").replace(reg,"$1\r\n$2$3");var pad=0;return $.each(xml.split("\r\n"),function(index,node){var indent=0;node.match(/.+<\/\w[^>]*>$/)?indent=0:node.match(/^<\/\w/)?0!=pad&&(pad-=1):indent=node.match(/^<\w[^>]*[^\/]>.*$/)?1:0;for(var padding="",i=0;i<pad;i++)padding+="  ";formatted+=padding+node+"\r\n",pad+=indent}),formatted}function PlayJsQQPopWin(qq,site,hasMenu){setTimeout(function(){window.location.href="tencent://message/?uin="+qq+"&Site="+site+"&Menu="+hasMenu})}var _hmt=_hmt||[];!function(){var hm=document.createElement("script");hm.src="//hm.baidu.com/hm.js?ed13a730df72b0d9d0307dff4d8fdaeb";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)}(),window.bassdk={quick:function(){},track:function(){},userIdentify:function(){}},function($){function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.event.special.destroyed={remove:function(o){o.handler&&o.handler()}},$.support.transition=transitionEnd();var addWithTransition=function($father,$child,direction,cb){"none"==$father.css("display")&&$father.show(0),$father.css({height:"auto",transition:"0.6s"});var childOption={transition:"0.6s",position:"relative",opacity:0},scope=this;childOption[direction]="20px",$child.css(childOption),$father.data("oldHeight",$father.height()),$father.append($child),$father.data("newHeight",$father.height()),$father.height($father.data("oldHeight")).height($father.data("newHeight")).one($.support.transition.end,function(){$father.css({height:"",transition:""})}),childOption.opacity=1,childOption[direction]=0,$child.css(childOption).one($.support.transition.end,function(){var childOption={transition:"",position:"",opacity:""};childOption[direction]="",$(this).css(childOption),cb&&cb.call(scope)})},detachWithTransition=function($father,$child,direction,cb){"none"==$father.css("display")&&$father.show(0),$father.css({height:"auto",transition:"0.6s"});var childOption={transition:"0.6s",position:"relative",opacity:1},scope=this;childOption[direction]="0",$child.css(childOption),$father.data("oldHeight",$father.height()),$child.hide(0),$father.data("newHeight",$father.height()),$child.show(0),childOption.opacity=0,childOption[direction]="20px",$child.css(childOption).one($.support.transition.end,function(){$child.detach(),cb&&cb.call(scope)}),$father.height($father.data("oldHeight")).height($father.data("newHeight")).one($.support.transition.end,function(){$father.css({height:"",transition:""})})};$.fn.appendWithTransition=function(dom,direction,cb){var $father=this,$test=$(dom),$child=$test?$test:dom;return addWithTransition($father,$child,direction?direction:"left",cb),this},$.fn.appendToWithTransition=function(dom,direction,cb){var $child=this,$test=$(dom),$father=$test?$test:dom;return addWithTransition($father,$child,direction?direction:"left",cb),this},$.fn.detachWithTransition=function(direction,cb){var $father=this.parent();return detachWithTransition($father,this,direction?direction:"left",cb),this};var originalAddEventListener=window.addEventListener,originalRemoveEventListener=window.removeEventListener;window.addEventListener=function(){!window.listenerStack&&(window.listenerStack={}),window.listenerStack[arguments[0]]=arguments[1],originalAddEventListener.apply(this,arguments)},window.removeEventListener=function(){!window.listenerStack&&(window.listenerStack={}),delete window.listenerStack[arguments[0]],originalRemoveEventListener.apply(this,arguments)},$.fn.consistentTransition=function(){var _this=this,rect=$.data(window,this.attr("rcp-id"));if(rect&&rect.hasOwnProperty("top")&&rect.el[0]!==this[0]){var newRect=window.getScreenRect(this,$("body")),transform="translate3d("+(rect.left-newRect.left)+"px, "+(rect.top-newRect.top)+"px, 0)";this.hide(0),this.css({"-webkit-transform":transform,transform:transform,width:newRect.width+"px",height:newRect.height+"px",transition:0}),this.show(0),this.css({"-webkit-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)",width:rect.width+"px",height:rect.height+"px",transition:"all 300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}).one($.support.transition.end,function(){_this.css({"-webkit-transform":"",transform:"",width:"",height:"",transition:""}),$.data(window,_this.attr("rcp-id"),$.extend({el:_this},window.getScreenRect(_this,$("body"))))})}else this.css({"-webkit-transform":"",transform:"",width:"",height:"",transition:""}),$.data(window,this.attr("rcp-id"),$.extend({el:this},window.getScreenRect(this,$("body"))))}}($),Date.prototype.Format=function(fmt){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(""+this.getFullYear()).substr(4-RegExp.$1.length)));for(var k in o)new RegExp("("+k+")").test(fmt)&&(fmt=fmt.replace(RegExp.$1,1==RegExp.$1.length?o[k]:("00"+o[k]).substr((""+o[k]).length)));return fmt},window.getBrowserType=function(){var is_chrome=navigator.userAgent.indexOf("Chrome")>-1,is_explorer=navigator.userAgent.indexOf("MSIE")>-1,is_firefox=navigator.userAgent.indexOf("Firefox")>-1,is_safari=navigator.userAgent.indexOf("Safari")>-1,is_opera=navigator.userAgent.toLowerCase().indexOf("op")>-1;return is_chrome&&is_safari&&(is_safari=!1),is_chrome&&is_opera&&(is_chrome=!1),is_explorer?"MSIE":is_firefox?"Firefox":is_opera?"op":is_safari?"Safari":is_chrome?"Chrome":null},window.getScreenRect=function(element,screen){var elementRect=element[0].getBoundingClientRect(),screenRect=screen[0].getBoundingClientRect();return{top:elementRect.top-screenRect.top,left:elementRect.left-screenRect.left,width:elementRect.width,height:elementRect.height}},window.clearSelection=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},window.ROPStyleConstant={loadingTime:0},String.prototype.plural=function(revert){var plural={"(quiz)$":"$1zes","^(ox)$":"$1en","([m|l])ouse$":"$1ice","(matr|vert|ind)ix|ex$":"$1ices","(x|ch|ss|sh)$":"$1es","([^aeiouy]|qu)y$":"$1ies","(hive)$":"$1s","(?:([^f])fe|([lr])f)$":"$1$2ves","(shea|lea|loa|thie)f$":"$1ves",sis$:"ses","([ti])um$":"$1a","(tomat|potat|ech|her|vet)o$":"$1oes","(bu)s$":"$1ses","(alias)$":"$1es","(octop)us$":"$1i","(ax|test)is$":"$1es","(us)$":"$1es","([^s]+)$":"$1s"},singular={"(quiz)zes$":"$1","(matr)ices$":"$1ix","(vert|ind)ices$":"$1ex","^(ox)en$":"$1","(alias)es$":"$1","(octop|vir)i$":"$1us","(cris|ax|test)es$":"$1is","(shoe)s$":"$1","(o)es$":"$1","(bus)es$":"$1","([m|l])ice$":"$1ouse","(x|ch|ss|sh)es$":"$1","(m)ovies$":"$1ovie","(s)eries$":"$1eries","([^aeiouy]|qu)ies$":"$1y","([lr])ves$":"$1f","(tive)s$":"$1","(hive)s$":"$1","(li|wi|kni)ves$":"$1fe","(shea|loa|lea|thie)ves$":"$1f","(^analy)ses$":"$1sis","((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$":"$1$2sis","([ti])a$":"$1um","(n)ews$":"$1ews","(h|bl)ouses$":"$1ouse","(corpse)s$":"$1","(us)es$":"$1",s$:""},irregular={move:"moves",foot:"feet",goose:"geese",sex:"sexes",child:"children",man:"men",tooth:"teeth",person:"people"},uncountable=["sheep","fish","deer","moose","series","species","money","rice","information","equipment"];if(uncountable.indexOf(this.toLowerCase())>=0)return this;for(var word in irregular){if(revert)var pattern=new RegExp(irregular[word]+"$","i"),replace=word;else var pattern=new RegExp(word+"$","i"),replace=irregular[word];if(pattern.test(this))return this.replace(pattern,replace)}if(revert)var array=singular;else var array=plural;for(var reg in array){var pattern=new RegExp(reg,"i");if(pattern.test(this))return this.replace(pattern,array[reg])}return this};
"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),supplierApp=angular.module("SupplierApp",["ngRoute","ui.router","ngAnimate","ngCookies","ngMaterial","ngMessages"]);supplierApp.config(function($mdThemingProvider){var customBlueMap=$mdThemingProvider.extendPalette("cyan",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"ffffff",300:"00C8AB",500:"00C5A3",800:"00A589",A100:"EEFCFF"});$mdThemingProvider.definePalette("customBlue",customBlueMap),$mdThemingProvider.theme("default").primaryPalette("customBlue",{"default":"500","hue-1":"300","hue-2":"800","hue-3":"A100"}).accentPalette("pink"),$mdThemingProvider.theme("dracular","default").primaryPalette("grey",{"default":"900","hue-1":"50","hue-2":"800","hue-3":"900"}).accentPalette("customBlue")}),supplierApp.config(function($mdIconProvider){$mdIconProvider.iconSet("action","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-action.svg",24).iconSet("alert","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-alert.svg",24).iconSet("av","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-av.svg",24).iconSet("communication","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-communication.svg",24).iconSet("content","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-content.svg",24).iconSet("device","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-device.svg",24).iconSet("editor","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-editor.svg",24).iconSet("file","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-file.svg",24).iconSet("hardware","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-hardware.svg",24).iconSet("image","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-image.svg",24).iconSet("maps","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-maps.svg",24).iconSet("navigation","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-navigation.svg",24).iconSet("notification","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-notification.svg",24).iconSet("social","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-social.svg",24).iconSet("toggle","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-toggle.svg",24).defaultIconSet("/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-action.svg",24)}),supplierApp.config(["$stateProvider","$urlRouterProvider","$locationProvider",function($stateProvider,$urlRouterProvider,$locationProvider){$stateProvider.state("index",{templateUrl:"/_view/supplier/index",url:"/supplier/home",controller:"IndexCtrl"}).state("all-comment",{templateUrl:"/_view/supplier/all-comment",url:"/supplier/all-comment",controller:"AllCommentCtrl"}).state("API",{params:{param:null,cat_id:""},templateUrl:"/_view/supplier/API",url:"/supplier/API",controller:"APICtrl"}).state("API?:id",{params:{param:null,cat_id:""},templateUrl:"/_view/supplier/API",url:"/supplier/API",controller:"APICtrl"}).state("function",{templateUrl:"/_view/supplier/function",url:"/supplier/function",controller:"FunctionCtrl"}).state("info",{templateUrl:"/_view/supplier/info",url:"/supplier/info",controller:"InfoCtrl"}).state("info-detail",{templateUrl:"/_view/supplier/info-detail",url:"/supplier/info-detail",controller:"InfoDetailCtrl"}),$urlRouterProvider.when(/\/api\/.+\.html/i,"/supplier/API"),$urlRouterProvider.otherwise("/supplier/home"),$locationProvider.html5Mode(!0),$locationProvider.hashPrefix("!")}]),supplierApp.controller("SupplierCtrl",["$scope","$route","$http","$location","$rootScope","$window","$state","$cookies","$mdDialog","$mdMedia",function($scope,$route,$http,$location,$rootScope,$window,$state,$cookies,$mdDialog,$mdMedia){function LoginController($scope,$mdDialog){var captcha_img="/captcha?l=50&_l=1";$scope.captcha_img=captcha_img+"&time="+(new Date).getTime(),$scope.resetCaptcha=function(){$scope.captchaCode="",$scope.captcha_img=captcha_img+"&time="+(new Date).getTime()},$scope.showCaptcha=$rootScope.loginMistakes>2,$scope.login=function(){if($scope.loginForm.$invalid&&$rootScope.loginMistakes>2)return $scope.loginForm.$error.required&&$scope.loginForm.$error.required.forEach(function(r){r.$setDirty(!0)}),$("#loginPanel").parent().addClass("invalid"),setTimeout(function(){$("#loginPanel").parent().removeClass("invalid")},600),$rootScope.loginMistakes++,void($scope.showCaptcha=$rootScope.loginMistakes>2);var OSName="Unknown OS";navigator.appVersion.indexOf("Win")!=-1&&(OSName="Windows"),navigator.appVersion.indexOf("Mac")!=-1&&(OSName="MacOS"),navigator.appVersion.indexOf("X11")!=-1&&(OSName="UNIX"),navigator.appVersion.indexOf("Linux")!=-1&&(OSName="Linux");var myParam={user_account:$scope.user_account,password:$scope.password,login_system:OSName,ssv_id:$rootScope.ssv_user_id?$rootScope.ssv_user_id:""};$http.post("/agent",{module:"sso",partial:"session",api:"login",param:myParam}).then(function(body){if("boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success){if($rootScope.profile=body.data,$rootScope.getSystemHints(),$cookies.put("_session",JSON.stringify($rootScope.profile),{path:"/",domain:"."+Constant.host}),$(".login").css("pointerEvents",""),bassdk){var sign="";try{sign=JSON.parse(getCookie("_session")).sign}catch(e){}bassdk.userIdentify(sign,!0)}$mdDialog.hide(1)}else $rootScope.loginMistakes++,$rootScope.profile=void 0,$scope.showCaptcha=$rootScope.loginMistakes>2,$("#loginPanel").parent().addClass("invalid"),setTimeout(function(){$("#loginPanel").parent().removeClass("invalid")},600)},function(why){$rootScope.alert(why)})},$scope.toModule=$rootScope.toModule}$rootScope.ssv_user_id=$location.search().ssv_user_id,$rootScope.loginMistakes=0,$rootScope._timestamp=(new Date).getTime(),$scope.verifyCode=function(){var _captcha=$cookies.get("_captcha");return _captcha?$scope.captchaCode==$cookies.get("_captcha"):void $scope.resetCaptcha()};var hideLoading=function(){return $http.post("/agent",{module:"supplier",partial:"index",api:"carousels",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){body.data.data_list&&body.data.data_list.length?$rootScope.carousels=body.data.data_list:$rootScope.carousels=[{image_title:"<span style='color: white'>融数供应商</span>",image_desc:"<span style='color: gray'>融数供应商描述</span>",image_url:"/resource/supplier/mr1.jpg",image_link:""},{image_title:"<span style='color: white'>融数供应商</span>",image_desc:"<span style='color: gray'>融数供应商描述</span>",image_url:"/resource/supplier/mr2.jpg",image_link:""}],$(".loading").addClass("start"),setTimeout(function(){$(".loading").addClass("out").one($.support.transition.end,function(){$(this).hide(),$("body").addClass("reveal")})},ROPStyleConstant.loadingTime)},function(why){$rootScope.alert(why)})};$scope.getIntro=function(cb){return $http.post("/agent",{module:"supplier",partial:"index",api:"ssv_intro",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){$rootScope.ssv_intro=body.data,cb&&cb.call()},function(why){$rootScope.alert(why)})},$rootScope.logout=function(){$http.post("/agent",{module:"sso",partial:"session",api:"logout"}).then(function(body){("boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success)&&$scope.getIntro(function(){$cookies.put("_session",null,{path:"/",domain:"."+Constant.host}),$cookies.remove("_session"),$rootScope.profile=void 0})},function(why){$rootScope.alert(why)})},$rootScope.getSystemHints=function(){$http.post("/agent",{module:"common",partial:"common",api:"tips"}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?$rootScope.systemHints=body.data.data_list:$rootScope.alert(body.data.msg)},function(why){$rootScope.alert(why)})},$rootScope.showAdvanced=function(ev){$(".login").css("pointerEvents","auto"),$mdDialog.show({controller:LoginController,templateUrl:"/_view/supplier/login",parent:angular.element(".login"),clickOutsideToClose:!0,onComplete:function(){}}).then(function(answer){console.log(1)},function(){$(".login").css("pointerEvents","")})},$rootScope.favor=function(){$http.post("/agent",{module:"supplier",partial:"session",api:"favor",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?(!$rootScope.ssv_intro&&($rootScope.ssv_intro={}),$rootScope.ssv_intro.favo_status="1"):$rootScope.alert(body.data)},function(why){$rootScope.alert(why)})},$rootScope.request=function(){$http.post("/agent",{module:"supplier",partial:"session",api:"request",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?(!$rootScope.ssv_intro&&($rootScope.ssv_intro={}),$rootScope.ssv_intro.apply_status="2"):$rootScope.alert(body.data)},function(why){$rootScope.alert(why)})},$rootScope.go=function(tab){$rootScope.scrollToTop(function(){$state.go(tab)})},$rootScope.locate=function(url){$window.location.href=url},$rootScope.toPlatform=function(path){$scope.locate(Constant.protocol+"://"+Constant.host+":"+Constant.port+(path?path:""))},$rootScope.toModule=function(module){$scope.locate(Constant.protocol+"://"+Constant.host+":"+Constant.port+"/"+module)},$scope.init=function(id,partial,info,param){var _session=$cookies.get("_session")?JSON.parse($cookies.get("_session")):"",_param=void 0,_info=void 0;try{_param=JSON.parse(param)}catch(e){_param=void 0}window._ssv={};try{_info=JSON.parse(info),window._ssv=_info}catch(e){_info=void 0}_session&&id==_session.id?($rootScope.profile=_session,$rootScope.getSystemHints()):($cookies.remove("_session"),$rootScope.profile=void 0);var initialize=function(){$scope.getIntro().then(function(){return hideLoading()}).then(function(){partial&&(_param?$state.go(partial,{param:_param,cat_id:_info.cat_id}):$state.go(partial))})};if(_info)$rootScope.ssv_user_id=_info.ssv_id,initialize();else if($rootScope.ssv_user_id)initialize();else{var ssv_user_id=sessionStorage.getItem("_ssv_user_id");ssv_user_id?($rootScope.ssv_user_id=ssv_user_id,initialize()):$window.location.href="/"}},$rootScope.scrollToTop=function(cb){"Firefox"==getBrowserType()?$("html").animate({scrollTop:0},cb):$("body").animate({scrollTop:0},cb)};var _lang=$cookies.get("_lang");$rootScope.alert=function(msg){$mdDialog.show($mdDialog.alert().clickOutsideToClose(!0).title("zh-cn"==_lang?"出错了":"Oops").textContent(msg).ariaLabel(msg).ok("zh-cn"==_lang?"了解":"Got it"))},$rootScope.isAdmin=function(){!(!$rootScope.profile||"0"!=$rootScope.profile.login_user_type&&"3"!=$rootScope.profile.login_user_type)}}]),supplierApp.controller("IndexCtrl",["$rootScope","$scope","$http",function($rootScope,$scope,$http){$rootScope.tab="index",$rootScope.revslider,$scope.scrollToContent=function(cb){$("body").animate({scrollTop:$(window).height()},cb)},$('a[href^="#"]',"#partials").click(function(e){e.preventDefault()});var devQ=$http.post("/agent",{module:"supplier",partial:"index",api:"success_developers",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){body.data.data_list&&body.data.data_list.length&&($scope.success_developers=body.data.data_list,setTimeout(function(){Holder&&Holder.run({images:document.querySelectorAll('img[src=""]')})}))},function(why){$rootScope.alert(why)});$http.post("/agent",{module:"supplier",partial:"index",api:"get_feature",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){body&&body.data&&body.data.user_desc&&($scope.ssv_feature=body.data.user_desc)},function(why){$rootScope.alert(why)}),$scope.$on("$viewContentLoaded",function(event){devQ.then(function(){setTimeout(function(){$("#owl-footer").owlCarousel({items:4,autoPlay:3e3,pagination:!1,navigation:!1,navigationText:!1,itemsMobile:!1})})}),setTimeout(function(){$(".carousel").carousel({interval:6e3})},800)})}]),supplierApp.controller("FunctionCtrl",["$rootScope","$scope","$http",function($rootScope,$scope,$http){$rootScope.tab="function",$('a[href^="#"]',"#partials").click(function(e){e.preventDefault()}),$http.post("/agent",{module:"supplier",partial:"function",api:"get_feature",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){body&&body.data&&body.data.user_desc&&($scope.ssv_feature=body.data.user_desc)},function(why){$rootScope.alert(why)})}]),supplierApp.controller("AllCommentCtrl",["$rootScope","$scope","$http",function($rootScope,$scope,$http){$rootScope.tab="allComment",$('a[href^="#"]',"#partials").click(function(e){e.preventDefault()}),$scope.comments=[],$scope.searcher=function(){$scope.loading=!0,$http.post("/agent",{module:"supplier",partial:"all-comment",api:"comments",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){"number"==typeof body.data.page_count?body.data.page_count:new Number(body.data.page_count);body.data.data_list&&body.data.data_list.length&&$.extend($scope.comments,body.data.data_list),$scope.loading=!1},function(why){$scope.loading=!1,$rootScope.alert(why)})},$scope.saveComment=function(){return $scope.commentForm.$invalid?($scope.commentForm.$error.required&&$scope.commentForm.$error.required.forEach(function(r){r.$setDirty(!0)}),$("#flash").addClass("warn"),void setTimeout(function(){$("#flash").removeClass("warn"),$scope.$apply()},1e3)):$rootScope.profile?void $http.post("/agent",{module:"supplier",partial:"all-comment",api:"add",param:{comment_content:$scope.comment_content_area,ssv_user_id:$scope.ssv_user_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?($scope.commentForm.$setPristine(),$scope.comment_content_area="",$scope.searcher()):$rootScope.alert(body.data.msg)},function(why){$rootScope.alert(why)}):void $rootScope.showAdvanced()},$scope.isCurrentSsv=function(){return!(!$rootScope.profile||!$rootScope.ssv_intro)&&$rootScope.profile.login_user_name==$rootScope.ssv_intro.user_name},$scope.toggleReply=function(comment){comment._toggleReply=!comment._toggleReply},$scope.replyComment=function(comment){comment._toggleReply=!comment._toggleReply,setTimeout(function(){$http.post("/agent",{module:"supplier",partial:"all-comment",api:"reply",param:{comment_id:comment.comment_id,comment_content:comment._comment_content,ssv_user_id:$scope.ssv_user_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?(delete comment._comment_content,$scope.searcher()):$rootScope.alert(body.data.msg)},function(why){$rootScope.alert(why)})},400)},$scope.isCreator=function(comment){return!(!$rootScope.profile||!comment)&&$rootScope.profile.login_user_name==comment.create_user},$scope.deleteComment=function(comment,comments){$http.post("/agent",{module:"supplier",partial:"all-comment",api:"delete",param:{comment_id:comment.comment_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?($scope.comment_content_area="",comments.splice(comments.indexOf(comment),1)):$rootScope.alert(body.data.msg)},function(why){$rootScope.alert(why)})},$scope.checkID=function(){return!!$rootScope.profile&&($rootScope.profile.id==$scope.ssv_user_id,!0)},$scope.searcher()}]),supplierApp.controller("APICtrl",["$rootScope","$scope","$http","$filter","$q","$cookies","$stateParams","$mdSidenav","$mdDialog",function($rootScope,$scope,$http,$filter,$q,$cookies,$stateParams,$mdSidenav,$mdDialog){var mode=$stateParams.param,modeCatId=$stateParams.cat_id;$rootScope.tab="API",$('a[href^="#"]',"#partials").click(function(e){e.preventDefault()});var _lang=$cookies.get("_lang"),beforeClipboardCopy="zh-cn"==_lang?"复制文档地址":"Copy document URL",afterClipboardCopy="zh-cn"==_lang?"已复制":"Copied",workaroundSupportClipboard=function(action){var actionMsg=" 来"+("cut"===action?"剪切":"拷贝"),actionKey="cut"===action?"X":"C";return actionMsg=/iPhone|iPad/i.test(navigator.userAgent)?"暂不支持iPhone和iPad :(":/Mac/i.test(navigator.userAgent)?"请按 ⌘-"+actionKey+actionMsg:"请按 Ctrl-"+actionKey+actionMsg};$scope.nav={entry:"api",subEntry:"",subDomains:[]},$scope.breadcrumbs=[],$scope.selectedEntry=0,$scope.defaultDetails={api_name:"API名字"},$scope.apiDetails=$scope.defaultDetails,$scope.domainDetails=$scope.defaultDetails,$scope.cat={cat_list:[],_selectedItem:0},$scope.clipboardHints=beforeClipboardCopy,$scope.makeDebugUrl=function(api){return Constant.protocol+"://"+Constant.host+"/ApiTool/index?sign="+api},$scope.makeSDKUrl=function(api){return Constant.protocol+"://"+Constant.host+"/welcome/sdkTool"},$scope.simpleAPILevelDescription=function(){};var catQ=(function(){function DynamicItems(list){_classCallCheck(this,DynamicItems),this.list=list,this.PAGE_SIZE=10,this.loadedPages={};for(var i=0;i<Math.ceil(this.list.length/this.PAGE_SIZE);i++)this.loadedPages[i]=[],this.loadedPages[i]=this.list.slice(i*this.PAGE_SIZE,(i+1)*this.PAGE_SIZE)}return _createClass(DynamicItems,[{key:"getItemAtIndex",value:function(index){var pageNumber=Math.floor(index/this.PAGE_SIZE),page=this.loadedPages[pageNumber];return page?page[index%this.PAGE_SIZE]:[]}},{key:"getLength",value:function(){return this.list.length}}]),DynamicItems}(),function(){return $http.post("/agent",{module:"supplier",partial:"API",api:"get_ssv_cat",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){if($scope.originalCat={cat_list:body.data.cat_list,_selectedItem:0},body.data&&body.data.cat_list&&body.data.cat_list.length){if($scope.cat={cat_list:body.data.cat_list,_selectedItem:0},$scope.cat.cat_list)for(var j=0;j<$scope.cat.cat_list.length;j++)if($scope.cat.cat_list[j].group_list){$scope.cat.cat_list[j]._selectedItem=0,$scope.apiCategoryId==$scope.cat.cat_list[j].cat_id&&($scope.cat._selectedItem=j);for(var i=0;i<$scope.cat.cat_list[j].group_list.length;i++)if($scope.cat.cat_list[j].group_list[i].api_list)for(var k=0;k<$scope.cat.cat_list[j].group_list[i].api_list.length;k++)mode&&mode.apiMethod&&mode.apiMethod==$scope.cat.cat_list[j].group_list[i].api_list[k].api_id&&($scope.cat.cat_list[j]._selectedItem=i)}}else $scope.cat={cat_list:body.data.cat_list,_selectedItem:0},$rootScope.alert("当前供应商没有任何API发布")},function(why){$rootScope.alert(why)})}),apiQ=function(){return $http.post("/agent",{module:"supplier",partial:"API",api:"api_list",param:{ssv_user_id:$rootScope.ssv_user_id,cat_id:$scope.apiCategoryId}}).then(function(body){body.data&&body.data.data_list&&body.data.data_list.length?$scope.api_list=body.data.data_list:$rootScope.alert(body.data.msg)},function(why){$rootScope.alert(why)})},domainQ=function(){return $http.post("/agent",{module:"supplier",partial:"API",api:"api_domain",param:{ssv_user_id:$rootScope.ssv_user_id,cat_id:$scope.apiCategoryId}}).then(function(body){body.data&&body.data.data_list&&body.data.data_list.length?$scope.api_domain=body.data.data_list:$rootScope.alert(body.data.msg)},function(why){$rootScope.alert(why)})},domainDetailQ=function(domain_id,cat){var cat_id=cat.cat_id;return $scope.apiCategoryName=cat.cat_name,cat_id&&($scope.apiCategoryId=cat_id),$http.post("/agent",{module:"supplier",partial:"API",api:"domain_detail",param:{domain_id:domain_id}}).then(function(body){body.data&&body.data.data_list&&body.data.data_list.length?$scope.domainDetails=body.data.data_list[0]:$scope.domainDetails=$scope.defaultDetails,$scope.domainDetails.domain_desc&&($scope.domainDetails.domain_desc_expanded=!0),$scope.domainDetails.property&&($scope.domainDetails.property_expanded=!0);for(var j=$scope.cat._selectedItem,i=0;i<$scope.cat.cat_list[j].group_list.length;i++)if($scope.cat.cat_list[j]._domain_index=0,$scope.cat.cat_list[j].domain_list)for(var k=0;k<$scope.cat.cat_list[j].domain_list.length;k++)if($scope.cat.cat_list[j].domain_list[k].domain_id==$scope.domainDetails.domain_id){$scope.cat.cat_list[j]._domain_index=k;break}$scope.loading=!1;var type="anonymous";try{type=JSON.parse(getCookie("_session")).login_user_type}catch(e){}return bassdk.quick("setDefaultAttr"),bassdk.track("visit",{pageName:$scope.domainDetails.domain_name,userType:type,supplierName:$rootScope.ssv_intro.user_name,pageType:"结构统计"}),body},function(why){$rootScope.alert(why),$scope.loading=!1})};$scope.domainDetailQ=function(domain_id,cat){if(!$scope.loading){if($scope.loading=!0,$scope.apiCategoryId)return void $rootScope.scrollToTop(function(){domainDetailQ(domain_id,cat)});var cat_id=cat.cat_id;$scope.apiCategoryName=cat.cat_name,cat_id&&($scope.apiCategoryId=cat_id),setTimeout(function(){$rootScope.scrollToTop(function(){domainDetailQ(domain_id,cat)})},500)}};var apiDetailQ=function(api_id,cat){var cat_id=cat.cat_id;return $scope.apiCategoryName=cat.cat_name,cat_id&&($scope.apiCategoryId=cat_id),$rootScope.scrollToTop(),$http.post("/agent",{module:"supplier",partial:"API",api:"api_detail",param:{api_id:api_id}}).then(function(body){if(body.data&&body.data.data_list&&body.data.data_list.length?$scope.apiDetails=body.data.data_list[0]:$scope.apiDetails=$scope.defaultDetails,$scope.breadcrumbs=[$scope.apiDetails],$scope.apiDetails.api_id=api_id,$scope.apiDetails.api_desc&&($scope.apiDetails.api_desc_expanded=!0),$scope.apiDetails.sysparam_expanded=!1,$scope.apiDetails.request_parameter_type&&($scope.apiDetails.request_parameter_type_expanded=!0),$scope.apiDetails.request_parameter_example&&($scope.apiDetails.request_parameter_example_expanded=!0),$scope.apiDetails.response_parameter_desc&&($scope.apiDetails.response_parameter_desc_expanded=!0),$scope.apiDetails.response_parameter_example&&($scope.apiDetails.response_parameter_example_expanded=!0),$scope.apiDetails.busparam&&$scope.apiDetails.busparam.length&&($scope.apiDetails.busparam_expanded=!0),$scope.apiDetails.result&&$scope.apiDetails.result.length&&($scope.apiDetails.result_expanded=!0),$scope.apiDetails.return_example_xml&&($scope.apiDetails.return_example_xml_expanded=!0),$scope.apiDetails.error_example_xml_expanded=!1,$scope.apiDetails.buserror&&($scope.apiDetails.buserror_expanded=!0),$scope.apiDetails.syserror_expanded=!1,$scope.apiDetails.debug_expanded=!0,setTimeout(function(){var return_example_xml=$filter("unescapeHtml")($scope.apiDetails.return_example_xml,"xml"),error_example_xml=$filter("unescapeHtml")($scope.apiDetails.error_example_xml,"xml"),return_example_json=$filter("unescapeHtml")($scope.apiDetails.return_example_json,"xml"),error_example_json=$filter("unescapeHtml")($scope.apiDetails.error_example_json,"xml");packageTree(return_example_xml?return_example_xml:""),packageTreeError(error_example_xml?error_example_xml:""),Process(return_example_json?return_example_json:"{}"),ProcessError(error_example_json?error_example_json:"{}")}),mode)for(var j=$scope.cat._selectedItem,i=0;i<$scope.cat.cat_list[j].group_list.length;i++)if($scope.cat.cat_list[j].group_list[i]._api_index=0,$scope.cat.cat_list[j].group_list[i].api_list)for(var k=0;k<$scope.cat.cat_list[j].group_list[i].api_list.length;k++)if($scope.cat.cat_list[j].group_list[i].api_list[k].api_id==$scope.apiDetails.api_id){$scope.cat.cat_list[j].group_list[i]._api_index=k;break}mode=void 0,$scope.loading=!1;var type="anonymous";try{type=JSON.parse(getCookie("_session")).login_user_type}catch(e){}bassdk.quick("setDefaultAttr"),bassdk.track("visit",{pageName:$scope.apiDetails.api_name,userType:type,supplierName:$rootScope.ssv_intro.user_name,pageType:"API统计"})},function(why){$rootScope.alert(why),$scope.loading=!1})};$scope.apiDetailQ=function(api_id,cat){if(!$scope.loading){if($scope.loading=!0,$scope.apiCategoryId)return void $rootScope.scrollToTop(function(){apiDetailQ(api_id,cat)});var cat_id=cat.cat_id;$scope.apiCategoryName=cat.cat_name,cat_id&&($scope.apiCategoryId=cat_id),setTimeout(function(){$rootScope.scrollToTop(function(){apiDetailQ(api_id,cat)})},500)}},$scope.changeAPISearch=function(){if($scope.cat=JSON.parse(JSON.stringify($scope.originalCat)),$scope.cat.cat_list)for(var j=0;j<$scope.cat.cat_list.length;j++){if($scope.cat.cat_list[j].group_list)for(var i=0;i<$scope.cat.cat_list[j].group_list.length;i++)if($scope.cat.cat_list[j].group_list[i].api_list)for(var k=$scope.cat.cat_list[j].group_list[i].api_list.length;k--;)$scope.cat.cat_list[j].group_list[i].api_list[k].api_name.indexOf($scope.apiSearch)==-1&&$scope.cat.cat_list[j].group_list[i].api_list[k].api_title.indexOf($scope.apiSearch)==-1&&$scope.cat.cat_list[j].group_list[i].api_list.splice(k,1);if($scope.cat.cat_list[j].domain_list)for(var k=$scope.cat.cat_list[j].domain_list.length;k--;)$scope.cat.cat_list[j].domain_list[k].domain_name.indexOf($scope.apiSearch)==-1&&$scope.cat.cat_list[j].domain_list[k].domain_title.indexOf($scope.apiSearch)==-1&&$scope.cat.cat_list[j].domain_list.splice(k,1)}},$scope.resetView=function(){$scope.selectedEntry?(setTimeout(function(){$(".md-expand.active md-tab-item").eq(0).click()}),setTimeout(function(){$scope.param=void 0,$scope.breadcrumbs=[],!$scope.cat.cat_list&&catQ(),$scope.apiCategoryId=void 0,$scope.apiCategoryName=void 0},200)):($scope.param=void 0,$scope.breadcrumbs=[],!$scope.cat.cat_list&&catQ(),$scope.apiCategoryId=void 0,$scope.apiCategoryName=void 0)},mode?($scope.apiCategoryId=modeCatId,mode.apiMethod?catQ().then(function(){setTimeout(function(){$(".md-expand.active md-tab-item").eq(0).click()}),$scope.apiDetailQ(mode.apiMethod,$scope.cat.cat_list[$scope.cat._selectedItem])}):mode.domainMethod&&catQ().then(function(){setTimeout(function(){$(".md-expand.active md-tab-item").eq(1).click()}),$scope.domainDetailQ(mode.domainMethod,$scope.cat.cat_list[$scope.cat._selectedItem])})):catQ(),$scope.selectCategory=function(cat_id){$scope.selectedCatId=cat_id,apiQ(),domainQ()},$scope.selectEntry=function(entry){if($scope.selectedEntry=entry,!$scope.loading)if(entry){var lastBreadcrumb=$scope.breadcrumbs[$scope.breadcrumbs.length-1];lastBreadcrumb&&lastBreadcrumb.api_id&&$scope.defaultDetails!==$scope.domainDetails||!lastBreadcrumb?$scope.breadcrumbs.push($scope.domainDetails):$scope.domainDetails&&$scope.domainDetails.domain_id&&$scope.domainDetails.domain_id!=lastBreadcrumb.domain_id&&$scope.defaultDetails!==$scope.domainDetails&&$scope.breadcrumbs.push($scope.domainDetails)}else $scope.breadcrumbs.splice(0),$scope.apiDetails&&$scope.apiDetails.api_id&&$scope.defaultDetails!==$scope.apiDetails&&$scope.breadcrumbs.push($scope.apiDetails)},$scope.toSubDomain=function(id,details){if(!$scope.loading){if($scope.loading=!0,!id)return void console.log("toSubDomain: id = "+id+";detail="+JSON.stringify(details));if(details)$rootScope.scrollToTop(function(){$(".md-expand.active md-tab-item").eq(1).click(),setTimeout(function(){domainDetailQ(id,$scope.cat.cat_list[$scope.cat._selectedItem]).then(function(){var lastBreadcrumb=$scope.breadcrumbs[$scope.breadcrumbs.length-1];lastBreadcrumb&&(lastBreadcrumb.domain_id&&lastBreadcrumb.domain_id!=id||lastBreadcrumb.api_id)&&$scope.breadcrumbs.push($scope.domainDetails),$scope.loading=!1})},400)});else{var id_list=$scope.breadcrumbs.map(function(r,i){return r.api_id?r.api_id:r.domain_id}),subdomain_index=id_list.indexOf(id);$scope.breadcrumbs.splice(subdomain_index+1);var lastBreadcrumb=$scope.breadcrumbs[$scope.breadcrumbs.length-1];lastBreadcrumb.api_id?$rootScope.scrollToTop(function(){$(".md-expand.active md-tab-item").eq(0).click(),setTimeout(function(){apiDetailQ(id,$scope.cat.cat_list[$scope.cat._selectedItem]).then(function(){$scope.loading=!1})},400)}):$rootScope.scrollToTop(function(){$(".md-expand.active md-tab-item").eq(1).click(),setTimeout(function(){domainDetailQ(id,$scope.cat.cat_list[$scope.cat._selectedItem]).then(function(){$scope.loading=!1})},400)})}}},$scope.copyToClipboard=function(details){var id=details.api_id?details.api_id:details.domain_id,method=details.api_id?"ApiMethod":"ApiDomain";return Constant.protocol+"://"+Constant.host+"/api/"+method+"-"+id+".html"},$scope.levelHint=function($event){function DialogController($scope,$mdDialog){$scope.closeDialog=function(){$mdDialog.hide()}}$event.preventDefault(),$event.stopPropagation();angular.element(document.body);$mdDialog.show({targetEvent:$event,clickOutsideToClose:!0,fullscreen:!1,template:'<md-dialog aria-label="List dialog" class="level-description">  <md-dialog-content style="padding: 32px;">  <p><span style="font-size:12px;">开放平台API目前分为低级、中级、高级，根据API的等级不同，需要使用对应的调用方式。</span></p>        <p>             <md-button class="md-raised low-rank" aria-label="Settings">初级API</md-button>可以使用ACCESS_TOKEN模式和安全签名方式进行调用            </p>            <p>            <md-button class="md-raised medium-rank" aria-label="Settings">中级API</md-button>可以使用ACCESS_TOKEN模式和安全签名方式进行调用            </p>            <p>            <md-button class="md-raised high-rank" aria-label="Settings">高级API</md-button>只可以使用安全签名方式进行调用。            </p>             <br /> <p>            <span style="font-size:12px;">供应商在发布API时，目前系统会自动根据供应商安全等级分配API调用等级，后续版本将会开放供应商自行设置API调用等级。</span>            </p>            <p>            <span style="font-size:12px;">当API调用等级比较低时，供应商应处理好服务器的调用安全性，确保数据的安全。</span>            </p>            <p>            <span style="font-size:12px;">开发者在调用初级和中级API时，必须使用https方式进行调用，保证数据传输中的安全性。</span>            </p> <br />          <p>            具体调用方式请参照 </p><p><a href="http://open.rongcapital.cn/welcome/doc?doc=4D41D81C-CBB1-4567-8D15-ACC16EE025C8" target="_blank">Secret签名模式调用API </a></p><p><a href="http://open.rongcapital.cn/welcome/doc?doc=1109A17A-5873-420E-A590-C4CE6C5A2D59" target="_blank">ACCESS_TOKEN模式调用API</a></p><p><a href="http://open.rongcapital.cn/welcome/doc?doc=792E3864-2481-42B9-9CD2-4D4B83F3B294" target="_blank">前端调用模式说明</a></p>  </md-dialog-content>  <md-dialog-actions>    <md-button ng-click="closeDialog()" class="md-raised">      关闭我    </md-button>  </md-dialog-actions></md-dialog>',controller:DialogController})},$scope.getScrollIndex=function(list,type){return type?$scope.apiDetails&&$scope.apiDetails.api_id?[].concat.apply([],list.map(function(r,i){return $scope.apiDetails.api_id==r.api_id?[i]:[]}))[0]:0:$scope.domainDetails&&$scope.domainDetails.domain_id?[].concat.apply([],list.map(function(r,i){return $scope.domainDetails.domain_id==r.domain_id?[i]:[]}))[0]:0},$scope.$on("$viewContentLoaded",function(event){var cliper=new Clipboard(".cliper");cliper.on("success",function(e){e.clearSelection(),$scope.clipboardHints=afterClipboardCopy,setTimeout(function(){$scope.clipboardHints=beforeClipboardCopy,$scope.$apply()},3e3)}),cliper.on("error",function(e){$scope.clipboardHints=workaroundSupportClipboard(e.action),setTimeout(function(){$scope.clipboardHints=beforeClipboardCopy},5e3)})})}]),supplierApp.controller("InfoCtrl",["$rootScope","$scope","$http",function($rootScope,$scope,$http){$rootScope.tab="info",$('a[href^="#"]',"#partials").click(function(e){e.preventDefault()}),$scope.infos=[];var pageIndex=1,pageSize=6;$scope.searcher=function(){$scope.loading=!0,$http.post("/agent",{module:"supplier",partial:"info",api:"infos",param:{pageindex:pageIndex,pagesize:pageSize,ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){var totalPages="number"==typeof body.data.page_count?body.data.page_count:new Number(body.data.page_count);totalPages>=pageIndex&&body.data.data_list&&body.data.data_list.length?(body.data.data_list.forEach(function(r,i){
$scope.infos.push(r)}),pageIndex++):$scope.loaded=!0,$scope.loading=!1},function(why){$scope.loading=!1,$rootScope.alert(why)})},$scope.more=function(info){},$scope.searcher()}]),supplierApp.filter("escapeHtml",function(){var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return function(str){return String(str).replace(/[&<>"'\/]/g,function(s){return entityMap[s]})}}),supplierApp.filter("unescapeHtml",function(){var entityMap={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/"};return function(str,type){if(str){var rawStr=String(str).replace(/(&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;)/g,function(s){return entityMap[s]});if(str&&"undefined"!=str){if("json"==type)return JSON.stringify(JSON.parse(rawStr),null,2);if("xml"==type)return formatXml(rawStr)}return rawStr}}}),supplierApp.filter("parseYear",function(){return function(str,type){var year=str;try{year=new Date(str).getFullYear()}catch(e){console.log("warning, unable to parse the date string")}return year}}),supplierApp.filter("parseMonth",function(){return function(str,type){var month=str;try{month=new Date(str).getMonth()+1}catch(e){console.log("warning, unable to parse the date string")}return month}}),supplierApp.filter("parseDate",function(){return function(str,type){var date=str;try{date=new Date(str).getDate(),date<10&&(date="0"+date)}catch(e){console.log("warning, unable to parse the date string")}return date}}),supplierApp.filter("trusthtml",["$sce",function($sce){return function(t){return $sce.trustAsHtml(t)}}]),supplierApp.directive("ropPagination",["$parse",function($parse){return{restrict:"A",scope:{index:"=index",size:"=size",total:"=total",searcher:"=searcher"},templateUrl:"/_template/pagination",link:function($scope,element,attrs){$scope.myIndex=$scope.index,$scope.ceilingIndex=$scope.index+4,$scope.$watch("total",function(){if($scope.total){$scope.pages=[];for(var i=0;i<Math.ceil($scope.total/$scope.size);i++)$scope.pages.push({index:i+1})}}),$scope.$watch("size",function(){if($scope.size){$scope.pages=[];for(var i=0;i<Math.ceil($scope.total/$scope.size);i++)$scope.pages.push({index:i+1});$scope.index=1,$scope.ceilingIndex=5,$scope.myIndex=$scope.index,$scope.ceilingIndex=$scope.index+4,$scope.searcher($scope.index,$scope.size)}}),$scope.toFirst=function(){$scope.index=1,$scope.ceilingIndex=5,$scope.searcher($scope.index,$scope.size)},$scope.toLast=function(){$scope.index=$scope.pages.length,$scope.ceilingIndex=$scope.pages.length,$scope.searcher($scope.index,$scope.size)},$scope.searchPrevious=function(){$scope.ceilingIndex==$scope.index+4&&$scope.index>1&&$scope.ceilingIndex--,$scope.index>1&&(--$scope.index,$scope.searcher($scope.index,$scope.size))},$scope.searchNext=function(){$scope.ceilingIndex==$scope.index&&$scope.index<$scope.pages.length&&$scope.ceilingIndex++,$scope.index<$scope.pages.length&&(++$scope.index,$scope.searcher($scope.index,$scope.size))},$scope.searchIndex=function(i){$scope.index=i,$scope.searcher($scope.index,$scope.size)},$scope.toPage=function(myIndex){$scope.ceilingIndex=Math.min(myIndex+4,$scope.pages.length),$scope.searchIndex(myIndex)}}}}]);